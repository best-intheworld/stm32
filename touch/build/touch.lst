ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"touch.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Src/touch.c"
  18              		.section	.text.TOUCH_SCK,"ax",%progbits
  19              		.align	1
  20              		.global	TOUCH_SCK
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	TOUCH_SCK:
  26              	.LVL0:
  27              	.LFB68:
   1:Src/touch.c   **** #include "touch.h"
   2:Src/touch.c   **** 
   3:Src/touch.c   **** void TOUCH_SCK(uint8_t state)
   4:Src/touch.c   **** {
  28              		.loc 1 4 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		.loc 1 4 1 is_stmt 0 view .LVU1
  33 0000 08B5     		push	{r3, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 3, -8
  37              		.cfi_offset 14, -4
   5:Src/touch.c   ****     if(state)
  38              		.loc 1 5 5 is_stmt 1 view .LVU2
  39              		.loc 1 5 7 is_stmt 0 view .LVU3
  40 0002 28B1     		cbz	r0, .L2
   6:Src/touch.c   ****     {
   7:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_SCK_PORT,TOUCH_SCK_PIN,SET);
  41              		.loc 1 7 9 is_stmt 1 view .LVU4
  42 0004 0122     		movs	r2, #1
  43 0006 0221     		movs	r1, #2
  44 0008 0448     		ldr	r0, .L5
  45              	.LVL1:
  46              		.loc 1 7 9 is_stmt 0 view .LVU5
  47 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
  48              	.LVL2:
  49              	.L1:
   8:Src/touch.c   ****     }
   9:Src/touch.c   ****     else
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 2


  10:Src/touch.c   ****     {
  11:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_SCK_PORT,TOUCH_SCK_PIN,RESET);
  12:Src/touch.c   ****     }
  13:Src/touch.c   **** }
  50              		.loc 1 13 1 view .LVU6
  51 000e 08BD     		pop	{r3, pc}
  52              	.LVL3:
  53              	.L2:
  11:Src/touch.c   ****     }
  54              		.loc 1 11 9 is_stmt 1 view .LVU7
  55 0010 0022     		movs	r2, #0
  56 0012 0221     		movs	r1, #2
  57 0014 0148     		ldr	r0, .L5
  58              	.LVL4:
  11:Src/touch.c   ****     }
  59              		.loc 1 11 9 is_stmt 0 view .LVU8
  60 0016 FFF7FEFF 		bl	HAL_GPIO_WritePin
  61              	.LVL5:
  62              		.loc 1 13 1 view .LVU9
  63 001a F8E7     		b	.L1
  64              	.L6:
  65              		.align	2
  66              	.L5:
  67 001c 000C0140 		.word	1073810432
  68              		.cfi_endproc
  69              	.LFE68:
  71              		.section	.text.TOUCH_MOSI,"ax",%progbits
  72              		.align	1
  73              		.global	TOUCH_MOSI
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  78              	TOUCH_MOSI:
  79              	.LVL6:
  80              	.LFB69:
  14:Src/touch.c   **** 
  15:Src/touch.c   **** void TOUCH_MOSI(uint8_t state)
  16:Src/touch.c   **** {
  81              		.loc 1 16 1 is_stmt 1 view -0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85              		.loc 1 16 1 is_stmt 0 view .LVU11
  86 0000 08B5     		push	{r3, lr}
  87              	.LCFI1:
  88              		.cfi_def_cfa_offset 8
  89              		.cfi_offset 3, -8
  90              		.cfi_offset 14, -4
  17:Src/touch.c   ****     if(state)
  91              		.loc 1 17 5 is_stmt 1 view .LVU12
  92              		.loc 1 17 7 is_stmt 0 view .LVU13
  93 0002 30B1     		cbz	r0, .L8
  18:Src/touch.c   ****     {
  19:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_MOSI_PORT,TOUCH_MOSI_PIN,SET);
  94              		.loc 1 19 9 is_stmt 1 view .LVU14
  95 0004 0122     		movs	r2, #1
  96 0006 4FF40071 		mov	r1, #512
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 3


  97 000a 0548     		ldr	r0, .L11
  98              	.LVL7:
  99              		.loc 1 19 9 is_stmt 0 view .LVU15
 100 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 101              	.LVL8:
 102              	.L7:
  20:Src/touch.c   ****     }
  21:Src/touch.c   ****     else
  22:Src/touch.c   ****     {
  23:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_MOSI_PORT,TOUCH_MOSI_PIN,RESET);
  24:Src/touch.c   ****     }
  25:Src/touch.c   **** }
 103              		.loc 1 25 1 view .LVU16
 104 0010 08BD     		pop	{r3, pc}
 105              	.LVL9:
 106              	.L8:
  23:Src/touch.c   ****     }
 107              		.loc 1 23 9 is_stmt 1 view .LVU17
 108 0012 0022     		movs	r2, #0
 109 0014 4FF40071 		mov	r1, #512
 110 0018 0148     		ldr	r0, .L11
 111              	.LVL10:
  23:Src/touch.c   ****     }
 112              		.loc 1 23 9 is_stmt 0 view .LVU18
 113 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 114              	.LVL11:
 115              		.loc 1 25 1 view .LVU19
 116 001e F7E7     		b	.L7
 117              	.L12:
 118              		.align	2
 119              	.L11:
 120 0020 001C0140 		.word	1073814528
 121              		.cfi_endproc
 122              	.LFE69:
 124              		.section	.text.TOUCH_CS,"ax",%progbits
 125              		.align	1
 126              		.global	TOUCH_CS
 127              		.syntax unified
 128              		.thumb
 129              		.thumb_func
 131              	TOUCH_CS:
 132              	.LVL12:
 133              	.LFB70:
  26:Src/touch.c   **** 
  27:Src/touch.c   **** void TOUCH_CS(uint8_t state)
  28:Src/touch.c   **** {
 134              		.loc 1 28 1 is_stmt 1 view -0
 135              		.cfi_startproc
 136              		@ args = 0, pretend = 0, frame = 0
 137              		@ frame_needed = 0, uses_anonymous_args = 0
 138              		.loc 1 28 1 is_stmt 0 view .LVU21
 139 0000 08B5     		push	{r3, lr}
 140              	.LCFI2:
 141              		.cfi_def_cfa_offset 8
 142              		.cfi_offset 3, -8
 143              		.cfi_offset 14, -4
  29:Src/touch.c   ****     if(state)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 4


 144              		.loc 1 29 5 is_stmt 1 view .LVU22
 145              		.loc 1 29 7 is_stmt 0 view .LVU23
 146 0002 30B1     		cbz	r0, .L14
  30:Src/touch.c   ****     {
  31:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_CS_PORT,TOUCH_CS_PIN,SET);
 147              		.loc 1 31 9 is_stmt 1 view .LVU24
 148 0004 0122     		movs	r2, #1
 149 0006 4FF40061 		mov	r1, #2048
 150 000a 0548     		ldr	r0, .L17
 151              	.LVL13:
 152              		.loc 1 31 9 is_stmt 0 view .LVU25
 153 000c FFF7FEFF 		bl	HAL_GPIO_WritePin
 154              	.LVL14:
 155              	.L13:
  32:Src/touch.c   ****     }
  33:Src/touch.c   ****     else
  34:Src/touch.c   ****     {
  35:Src/touch.c   ****         HAL_GPIO_WritePin(TOUCH_CS_PORT,TOUCH_CS_PIN,RESET);
  36:Src/touch.c   ****     }
  37:Src/touch.c   **** }
 156              		.loc 1 37 1 view .LVU26
 157 0010 08BD     		pop	{r3, pc}
 158              	.LVL15:
 159              	.L14:
  35:Src/touch.c   ****     }
 160              		.loc 1 35 9 is_stmt 1 view .LVU27
 161 0012 0022     		movs	r2, #0
 162 0014 4FF40061 		mov	r1, #2048
 163 0018 0148     		ldr	r0, .L17
 164              	.LVL16:
  35:Src/touch.c   ****     }
 165              		.loc 1 35 9 is_stmt 0 view .LVU28
 166 001a FFF7FEFF 		bl	HAL_GPIO_WritePin
 167              	.LVL17:
 168              		.loc 1 37 1 view .LVU29
 169 001e F7E7     		b	.L13
 170              	.L18:
 171              		.align	2
 172              	.L17:
 173 0020 001C0140 		.word	1073814528
 174              		.cfi_endproc
 175              	.LFE70:
 177              		.section	.text.touch_writeByte,"ax",%progbits
 178              		.align	1
 179              		.global	touch_writeByte
 180              		.syntax unified
 181              		.thumb
 182              		.thumb_func
 184              	touch_writeByte:
 185              	.LVL18:
 186              	.LFB72:
  38:Src/touch.c   **** 
  39:Src/touch.c   **** _m_touch_dev touch_dev =
  40:Src/touch.c   **** {
  41:Src/touch.c   ****     touchInit,
  42:Src/touch.c   ****     touchScan,
  43:Src/touch.c   ****     touchAdjust,
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 5


  44:Src/touch.c   ****     0,
  45:Src/touch.c   ****     0,
  46:Src/touch.c   ****     0,
  47:Src/touch.c   ****     0,
  48:Src/touch.c   ****     0,
  49:Src/touch.c   ****     0,
  50:Src/touch.c   ****     0,
  51:Src/touch.c   ****     0,
  52:Src/touch.c   **** };
  53:Src/touch.c   **** 
  54:Src/touch.c   **** /**
  55:Src/touch.c   ****  * @brief       触摸屏初始化
  56:Src/touch.c   ****  * @param       无
  57:Src/touch.c   ****  * @retval      0,没有进行校准
  58:Src/touch.c   ****  *              1,进行过校准
  59:Src/touch.c   ****  */
  60:Src/touch.c   **** uint8_t touchInit(void)
  61:Src/touch.c   **** {
  62:Src/touch.c   ****     touch_dev.touchtype = 0;                   /* 默认设置(电阻屏 & 竖屏) */
  63:Src/touch.c   ****     touch_dev.touchtype |= 0 & 0x01;  /* 根据LCD判定是横屏还是竖屏 */
  64:Src/touch.c   **** 
  65:Src/touch.c   ****     __HAL_RCC_GPIOB_CLK_ENABLE();
  66:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
  67:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
  68:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_PEN_PIN;
  69:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
  70:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
  71:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
  72:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_PEN_PORT,&GPIO_InitStruct);
  73:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_MISO_PIN;
  74:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MISO_PORT,&GPIO_InitStruct);
  75:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_MOSI_PIN;
  76:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
  77:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
  78:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
  79:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MOSI_PORT,&GPIO_InitStruct);
  80:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_SCK_PIN;
  81:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_SCK_PORT,&GPIO_InitStruct);
  82:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_CS_PIN;
  83:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_CS_PORT,&GPIO_InitStruct);
  84:Src/touch.c   ****     touch_readXY(&touch_dev.x[0],&touch_dev.y[0]);
  85:Src/touch.c   ****     AT24C02_Init();
  86:Src/touch.c   ****     if(touch_getAdjustData())
  87:Src/touch.c   ****     {
  88:Src/touch.c   ****         return 0;
  89:Src/touch.c   ****     }
  90:Src/touch.c   ****     else
  91:Src/touch.c   ****     {
  92:Src/touch.c   ****         LCD_clear(WHITE);
  93:Src/touch.c   ****         touchAdjust();
  94:Src/touch.c   ****         touch_saveAdjustData();
  95:Src/touch.c   ****     }
  96:Src/touch.c   ****     touch_getAdjustData();
  97:Src/touch.c   ****     return 1;
  98:Src/touch.c   **** }
  99:Src/touch.c   **** 
 100:Src/touch.c   **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 6


 101:Src/touch.c   **** /**
 102:Src/touch.c   ****  * @brief       SPI写数据
 103:Src/touch.c   ****  *   @note      向触摸屏IC写入1 byte数据
 104:Src/touch.c   ****  * @param       data: 要写入的数据
 105:Src/touch.c   ****  * @retval      无
 106:Src/touch.c   ****  */
 107:Src/touch.c   **** void touch_writeByte(uint8_t data)
 108:Src/touch.c   **** {
 187              		.loc 1 108 1 is_stmt 1 view -0
 188              		.cfi_startproc
 189              		@ args = 0, pretend = 0, frame = 0
 190              		@ frame_needed = 0, uses_anonymous_args = 0
 191              		.loc 1 108 1 is_stmt 0 view .LVU31
 192 0000 38B5     		push	{r3, r4, r5, lr}
 193              	.LCFI3:
 194              		.cfi_def_cfa_offset 16
 195              		.cfi_offset 3, -16
 196              		.cfi_offset 4, -12
 197              		.cfi_offset 5, -8
 198              		.cfi_offset 14, -4
 199 0002 0446     		mov	r4, r0
 109:Src/touch.c   ****     for(uint8_t i = 0;i < 8;i++)
 200              		.loc 1 109 5 is_stmt 1 view .LVU32
 201              	.LBB2:
 202              		.loc 1 109 9 view .LVU33
 203              	.LVL19:
 204              		.loc 1 109 17 is_stmt 0 view .LVU34
 205 0004 0025     		movs	r5, #0
 206              		.loc 1 109 5 view .LVU35
 207 0006 0FE0     		b	.L20
 208              	.LVL20:
 209              	.L21:
 110:Src/touch.c   ****     {
 111:Src/touch.c   ****         if(data & 0x80)
 112:Src/touch.c   ****         {
 113:Src/touch.c   ****             TOUCH_MOSI(1);
 114:Src/touch.c   ****         }
 115:Src/touch.c   ****         else
 116:Src/touch.c   ****         {
 117:Src/touch.c   ****             TOUCH_MOSI(0);
 210              		.loc 1 117 13 is_stmt 1 view .LVU36
 211 0008 0020     		movs	r0, #0
 212 000a FFF7FEFF 		bl	TOUCH_MOSI
 213              	.LVL21:
 214              	.L22:
 118:Src/touch.c   ****         }
 119:Src/touch.c   ****         data <<= 1;
 215              		.loc 1 119 9 view .LVU37
 216              		.loc 1 119 14 is_stmt 0 view .LVU38
 217 000e 6400     		lsls	r4, r4, #1
 218              	.LVL22:
 219              		.loc 1 119 14 view .LVU39
 220 0010 E4B2     		uxtb	r4, r4
 221              	.LVL23:
 120:Src/touch.c   ****         TOUCH_SCK(0);
 222              		.loc 1 120 9 is_stmt 1 view .LVU40
 223 0012 0020     		movs	r0, #0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 7


 224 0014 FFF7FEFF 		bl	TOUCH_SCK
 225              	.LVL24:
 121:Src/touch.c   ****         delay_us(1);
 226              		.loc 1 121 9 view .LVU41
 227 0018 0120     		movs	r0, #1
 228 001a FFF7FEFF 		bl	delay_us
 229              	.LVL25:
 122:Src/touch.c   ****         TOUCH_SCK(1);
 230              		.loc 1 122 9 view .LVU42
 231 001e 0120     		movs	r0, #1
 232 0020 FFF7FEFF 		bl	TOUCH_SCK
 233              	.LVL26:
 109:Src/touch.c   ****     {
 234              		.loc 1 109 30 discriminator 2 view .LVU43
 235 0024 0135     		adds	r5, r5, #1
 236              	.LVL27:
 109:Src/touch.c   ****     {
 237              		.loc 1 109 30 is_stmt 0 discriminator 2 view .LVU44
 238 0026 EDB2     		uxtb	r5, r5
 239              	.LVL28:
 240              	.L20:
 109:Src/touch.c   ****     {
 241              		.loc 1 109 25 is_stmt 1 discriminator 1 view .LVU45
 242 0028 072D     		cmp	r5, #7
 243 002a 06D8     		bhi	.L25
 111:Src/touch.c   ****         {
 244              		.loc 1 111 9 view .LVU46
 111:Src/touch.c   ****         {
 245              		.loc 1 111 11 is_stmt 0 view .LVU47
 246 002c 14F0800F 		tst	r4, #128
 247 0030 EAD0     		beq	.L21
 113:Src/touch.c   ****         }
 248              		.loc 1 113 13 is_stmt 1 view .LVU48
 249 0032 0120     		movs	r0, #1
 250 0034 FFF7FEFF 		bl	TOUCH_MOSI
 251              	.LVL29:
 252 0038 E9E7     		b	.L22
 253              	.L25:
 254              	.LBE2:
 123:Src/touch.c   ****     }
 124:Src/touch.c   **** }
 255              		.loc 1 124 1 is_stmt 0 view .LVU49
 256 003a 38BD     		pop	{r3, r4, r5, pc}
 257              		.loc 1 124 1 view .LVU50
 258              		.cfi_endproc
 259              	.LFE72:
 261              		.section	.text.touch_readADC,"ax",%progbits
 262              		.align	1
 263              		.global	touch_readADC
 264              		.syntax unified
 265              		.thumb
 266              		.thumb_func
 268              	touch_readADC:
 269              	.LVL30:
 270              	.LFB73:
 125:Src/touch.c   **** 
 126:Src/touch.c   **** /**
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 8


 127:Src/touch.c   ****  * @brief       SPI读数据
 128:Src/touch.c   ****  *   @note      从触摸屏IC读取adc值
 129:Src/touch.c   ****  * @param       cmd: 指令
 130:Src/touch.c   ****  * @retval      读取到的数据,ADC值(12bit)
 131:Src/touch.c   ****  */
 132:Src/touch.c   **** uint16_t touch_readADC(uint8_t cmd)
 133:Src/touch.c   **** {
 271              		.loc 1 133 1 is_stmt 1 view -0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 0
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275              		.loc 1 133 1 is_stmt 0 view .LVU52
 276 0000 38B5     		push	{r3, r4, r5, lr}
 277              	.LCFI4:
 278              		.cfi_def_cfa_offset 16
 279              		.cfi_offset 3, -16
 280              		.cfi_offset 4, -12
 281              		.cfi_offset 5, -8
 282              		.cfi_offset 14, -4
 283 0002 0446     		mov	r4, r0
 134:Src/touch.c   ****     uint16_t data = 0;
 284              		.loc 1 134 5 is_stmt 1 view .LVU53
 285              	.LVL31:
 135:Src/touch.c   ****     TOUCH_SCK(0);
 286              		.loc 1 135 5 view .LVU54
 287 0004 0020     		movs	r0, #0
 288              	.LVL32:
 289              		.loc 1 135 5 is_stmt 0 view .LVU55
 290 0006 FFF7FEFF 		bl	TOUCH_SCK
 291              	.LVL33:
 136:Src/touch.c   ****     TOUCH_MOSI(0);
 292              		.loc 1 136 5 is_stmt 1 view .LVU56
 293 000a 0020     		movs	r0, #0
 294 000c FFF7FEFF 		bl	TOUCH_MOSI
 295              	.LVL34:
 137:Src/touch.c   ****     TOUCH_CS(0);
 296              		.loc 1 137 5 view .LVU57
 297 0010 0020     		movs	r0, #0
 298 0012 FFF7FEFF 		bl	TOUCH_CS
 299              	.LVL35:
 138:Src/touch.c   ****     touch_writeByte(cmd);
 300              		.loc 1 138 5 view .LVU58
 301 0016 2046     		mov	r0, r4
 302 0018 FFF7FEFF 		bl	touch_writeByte
 303              	.LVL36:
 139:Src/touch.c   ****     delay_us(6);//adc转换最多需要6us
 304              		.loc 1 139 5 view .LVU59
 305 001c 0620     		movs	r0, #6
 306 001e FFF7FEFF 		bl	delay_us
 307              	.LVL37:
 140:Src/touch.c   ****     TOUCH_SCK(0);//产生一个时钟清除busy位
 308              		.loc 1 140 5 view .LVU60
 309 0022 0020     		movs	r0, #0
 310 0024 FFF7FEFF 		bl	TOUCH_SCK
 311              	.LVL38:
 141:Src/touch.c   ****     delay_us(1);
 312              		.loc 1 141 5 view .LVU61
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 9


 313 0028 0120     		movs	r0, #1
 314 002a FFF7FEFF 		bl	delay_us
 315              	.LVL39:
 142:Src/touch.c   ****     TOUCH_SCK(1);
 316              		.loc 1 142 5 view .LVU62
 317 002e 0120     		movs	r0, #1
 318 0030 FFF7FEFF 		bl	TOUCH_SCK
 319              	.LVL40:
 143:Src/touch.c   ****     delay_us(1);
 320              		.loc 1 143 5 view .LVU63
 321 0034 0120     		movs	r0, #1
 322 0036 FFF7FEFF 		bl	delay_us
 323              	.LVL41:
 144:Src/touch.c   ****     TOUCH_SCK(0);
 324              		.loc 1 144 5 view .LVU64
 325 003a 0020     		movs	r0, #0
 326 003c FFF7FEFF 		bl	TOUCH_SCK
 327              	.LVL42:
 145:Src/touch.c   ****     for(uint8_t i = 0;i < 16;i++)
 328              		.loc 1 145 5 view .LVU65
 329              	.LBB3:
 330              		.loc 1 145 9 view .LVU66
 331              		.loc 1 145 17 is_stmt 0 view .LVU67
 332 0040 0025     		movs	r5, #0
 333              	.LBE3:
 134:Src/touch.c   ****     TOUCH_SCK(0);
 334              		.loc 1 134 14 view .LVU68
 335 0042 2C46     		mov	r4, r5
 336              	.LVL43:
 337              	.LBB4:
 338              		.loc 1 145 5 view .LVU69
 339 0044 01E0     		b	.L27
 340              	.LVL44:
 341              	.L28:
 342              		.loc 1 145 31 is_stmt 1 discriminator 2 view .LVU70
 343 0046 0135     		adds	r5, r5, #1
 344              	.LVL45:
 345              		.loc 1 145 31 is_stmt 0 discriminator 2 view .LVU71
 346 0048 EDB2     		uxtb	r5, r5
 347              	.LVL46:
 348              	.L27:
 349              		.loc 1 145 25 is_stmt 1 discriminator 1 view .LVU72
 350 004a 0F2D     		cmp	r5, #15
 351 004c 13D8     		bhi	.L31
 146:Src/touch.c   ****     {
 147:Src/touch.c   ****         data <<= 1;
 352              		.loc 1 147 9 view .LVU73
 353              		.loc 1 147 14 is_stmt 0 view .LVU74
 354 004e 6400     		lsls	r4, r4, #1
 355              	.LVL47:
 356              		.loc 1 147 14 view .LVU75
 357 0050 A4B2     		uxth	r4, r4
 358              	.LVL48:
 148:Src/touch.c   ****         TOUCH_SCK(0);//下降沿有效
 359              		.loc 1 148 9 is_stmt 1 view .LVU76
 360 0052 0020     		movs	r0, #0
 361 0054 FFF7FEFF 		bl	TOUCH_SCK
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 10


 362              	.LVL49:
 149:Src/touch.c   ****         delay_us(1);
 363              		.loc 1 149 9 view .LVU77
 364 0058 0120     		movs	r0, #1
 365 005a FFF7FEFF 		bl	delay_us
 366              	.LVL50:
 150:Src/touch.c   ****         TOUCH_SCK(1);
 367              		.loc 1 150 9 view .LVU78
 368 005e 0120     		movs	r0, #1
 369 0060 FFF7FEFF 		bl	TOUCH_SCK
 370              	.LVL51:
 151:Src/touch.c   ****         if(HAL_GPIO_ReadPin(TOUCH_MISO_PORT,TOUCH_MISO_PIN))
 371              		.loc 1 151 9 view .LVU79
 372              		.loc 1 151 12 is_stmt 0 view .LVU80
 373 0064 0421     		movs	r1, #4
 374 0066 0748     		ldr	r0, .L32
 375 0068 FFF7FEFF 		bl	HAL_GPIO_ReadPin
 376              	.LVL52:
 377              		.loc 1 151 11 discriminator 1 view .LVU81
 378 006c 0028     		cmp	r0, #0
 379 006e EAD0     		beq	.L28
 152:Src/touch.c   ****         {
 153:Src/touch.c   ****             data++;
 380              		.loc 1 153 13 is_stmt 1 view .LVU82
 381              		.loc 1 153 17 is_stmt 0 view .LVU83
 382 0070 0134     		adds	r4, r4, #1
 383              	.LVL53:
 384              		.loc 1 153 17 view .LVU84
 385 0072 A4B2     		uxth	r4, r4
 386              	.LVL54:
 387              		.loc 1 153 17 view .LVU85
 388 0074 E7E7     		b	.L28
 389              	.L31:
 390              		.loc 1 153 17 view .LVU86
 391              	.LBE4:
 154:Src/touch.c   ****         }
 155:Src/touch.c   ****     }
 156:Src/touch.c   ****     data >>= 4;//ADC12位有效
 392              		.loc 1 156 5 is_stmt 1 view .LVU87
 393              		.loc 1 156 10 is_stmt 0 view .LVU88
 394 0076 2409     		lsrs	r4, r4, #4
 395              	.LVL55:
 157:Src/touch.c   ****     TOUCH_CS(1);
 396              		.loc 1 157 5 is_stmt 1 view .LVU89
 397 0078 0120     		movs	r0, #1
 398 007a FFF7FEFF 		bl	TOUCH_CS
 399              	.LVL56:
 158:Src/touch.c   ****     return data;
 400              		.loc 1 158 5 view .LVU90
 159:Src/touch.c   **** }
 401              		.loc 1 159 1 is_stmt 0 view .LVU91
 402 007e 2046     		mov	r0, r4
 403 0080 38BD     		pop	{r3, r4, r5, pc}
 404              	.LVL57:
 405              	.L33:
 406              		.loc 1 159 1 view .LVU92
 407 0082 00BF     		.align	2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 11


 408              	.L32:
 409 0084 000C0140 		.word	1073810432
 410              		.cfi_endproc
 411              	.LFE73:
 413              		.section	.text.touch_readXOY,"ax",%progbits
 414              		.align	1
 415              		.global	touch_readXOY
 416              		.syntax unified
 417              		.thumb
 418              		.thumb_func
 420              	touch_readXOY:
 421              	.LVL58:
 422              	.LFB74:
 160:Src/touch.c   **** 
 161:Src/touch.c   **** /**
 162:Src/touch.c   ****  * @brief       读取一个坐标值(x或者y)
 163:Src/touch.c   ****  *   @note      连续读取5次数据,对这些数据升序排列,
 164:Src/touch.c   ****  *              然后去掉最低和最高, 取平均值
 165:Src/touch.c   ****  *
 166:Src/touch.c   ****  * @param       cmd : 指令
 167:Src/touch.c   ****  *   @arg       0XD0: 读取X轴坐标(@竖屏状态,横屏状态和Y对调.)
 168:Src/touch.c   ****  *   @arg       0X90: 读取Y轴坐标(@竖屏状态,横屏状态和X对调.)
 169:Src/touch.c   ****  *
 170:Src/touch.c   ****  * @retval      读取到的数据(滤波后的), ADC值(12bit)
 171:Src/touch.c   ****  */
 172:Src/touch.c   **** uint16_t touch_readXOY(uint8_t cmd)
 173:Src/touch.c   **** {
 423              		.loc 1 173 1 is_stmt 1 view -0
 424              		.cfi_startproc
 425              		@ args = 0, pretend = 0, frame = 16
 426              		@ frame_needed = 0, uses_anonymous_args = 0
 427              		.loc 1 173 1 is_stmt 0 view .LVU94
 428 0000 30B5     		push	{r4, r5, lr}
 429              	.LCFI5:
 430              		.cfi_def_cfa_offset 12
 431              		.cfi_offset 4, -12
 432              		.cfi_offset 5, -8
 433              		.cfi_offset 14, -4
 434 0002 85B0     		sub	sp, sp, #20
 435              	.LCFI6:
 436              		.cfi_def_cfa_offset 32
 437 0004 0546     		mov	r5, r0
 174:Src/touch.c   ****     uint16_t temp = 0;
 438              		.loc 1 174 5 is_stmt 1 view .LVU95
 439              	.LVL59:
 175:Src/touch.c   ****     uint16_t sum = 0;
 440              		.loc 1 175 5 view .LVU96
 176:Src/touch.c   ****     uint16_t data = 0;
 441              		.loc 1 176 5 view .LVU97
 177:Src/touch.c   ****     uint16_t buf[TP_READ_TIMES];
 442              		.loc 1 177 5 view .LVU98
 178:Src/touch.c   ****     for(uint8_t i = 0;i < TP_READ_TIMES;i++)//获取5次数据
 443              		.loc 1 178 5 view .LVU99
 444              	.LBB5:
 445              		.loc 1 178 9 view .LVU100
 446              		.loc 1 178 17 is_stmt 0 view .LVU101
 447 0006 0024     		movs	r4, #0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 12


 448              		.loc 1 178 5 view .LVU102
 449 0008 09E0     		b	.L35
 450              	.LVL60:
 451              	.L36:
 179:Src/touch.c   ****     {
 180:Src/touch.c   ****         buf[i] = touch_readADC(cmd);
 452              		.loc 1 180 9 is_stmt 1 view .LVU103
 453              		.loc 1 180 18 is_stmt 0 view .LVU104
 454 000a 2846     		mov	r0, r5
 455 000c FFF7FEFF 		bl	touch_readADC
 456              	.LVL61:
 457              		.loc 1 180 16 discriminator 1 view .LVU105
 458 0010 04AB     		add	r3, sp, #16
 459 0012 03EB4403 		add	r3, r3, r4, lsl #1
 460 0016 23F80C0C 		strh	r0, [r3, #-12]	@ movhi
 178:Src/touch.c   ****     for(uint8_t i = 0;i < TP_READ_TIMES;i++)//获取5次数据
 461              		.loc 1 178 42 is_stmt 1 discriminator 3 view .LVU106
 462 001a 0134     		adds	r4, r4, #1
 463              	.LVL62:
 178:Src/touch.c   ****     for(uint8_t i = 0;i < TP_READ_TIMES;i++)//获取5次数据
 464              		.loc 1 178 42 is_stmt 0 discriminator 3 view .LVU107
 465 001c E4B2     		uxtb	r4, r4
 466              	.LVL63:
 467              	.L35:
 178:Src/touch.c   ****     for(uint8_t i = 0;i < TP_READ_TIMES;i++)//获取5次数据
 468              		.loc 1 178 25 is_stmt 1 discriminator 1 view .LVU108
 469 001e 042C     		cmp	r4, #4
 470 0020 F3D9     		bls	.L36
 471              	.LBE5:
 472              	.LBB6:
 181:Src/touch.c   ****     }
 182:Src/touch.c   ****     for(uint8_t i = 0;i < TP_READ_TIMES - 1;i++)//进行排序:升序
 473              		.loc 1 182 17 is_stmt 0 view .LVU109
 474 0022 0020     		movs	r0, #0
 475 0024 1AE0     		b	.L37
 476              	.LVL64:
 477              	.L39:
 478              	.LBB7:
 183:Src/touch.c   ****     {
 184:Src/touch.c   ****         for(uint8_t j = i + 1;j < TP_READ_TIMES;j++)//每一轮的buf[i]都是本轮次最小的数
 479              		.loc 1 184 50 is_stmt 1 discriminator 2 view .LVU110
 480 0026 0133     		adds	r3, r3, #1
 481              	.LVL65:
 482              		.loc 1 184 50 is_stmt 0 discriminator 2 view .LVU111
 483 0028 DBB2     		uxtb	r3, r3
 484              	.LVL66:
 485              	.L38:
 486              		.loc 1 184 33 is_stmt 1 discriminator 1 view .LVU112
 487 002a 042B     		cmp	r3, #4
 488 002c 15D8     		bhi	.L45
 185:Src/touch.c   ****         {
 186:Src/touch.c   ****             if(buf[i] > buf[j])
 489              		.loc 1 186 13 view .LVU113
 490              		.loc 1 186 19 is_stmt 0 view .LVU114
 491 002e 04AA     		add	r2, sp, #16
 492 0030 02EB4002 		add	r2, r2, r0, lsl #1
 493 0034 32F80C2C 		ldrh	r2, [r2, #-12]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 13


 494              		.loc 1 186 28 view .LVU115
 495 0038 04A9     		add	r1, sp, #16
 496 003a 01EB4301 		add	r1, r1, r3, lsl #1
 497 003e 31F80C1C 		ldrh	r1, [r1, #-12]
 498              		.loc 1 186 15 view .LVU116
 499 0042 8A42     		cmp	r2, r1
 500 0044 EFD9     		bls	.L39
 187:Src/touch.c   ****             {
 188:Src/touch.c   ****                 temp = buf[i];
 501              		.loc 1 188 17 is_stmt 1 view .LVU117
 502              	.LVL67:
 189:Src/touch.c   ****                 buf[i] = buf[j];
 503              		.loc 1 189 17 view .LVU118
 504              		.loc 1 189 24 is_stmt 0 view .LVU119
 505 0046 04AD     		add	r5, sp, #16
 506 0048 05EB400C 		add	ip, r5, r0, lsl #1
 507 004c 2CF80C1C 		strh	r1, [ip, #-12]	@ movhi
 190:Src/touch.c   ****                 buf[j] = temp;
 508              		.loc 1 190 17 is_stmt 1 view .LVU120
 509              		.loc 1 190 24 is_stmt 0 view .LVU121
 510 0050 05EB4301 		add	r1, r5, r3, lsl #1
 511 0054 21F80C2C 		strh	r2, [r1, #-12]	@ movhi
 512 0058 E5E7     		b	.L39
 513              	.LVL68:
 514              	.L45:
 515              		.loc 1 190 24 view .LVU122
 516              	.LBE7:
 182:Src/touch.c   ****     {
 517              		.loc 1 182 46 discriminator 2 view .LVU123
 518 005a 2046     		mov	r0, r4
 519              	.LVL69:
 520              	.L37:
 182:Src/touch.c   ****     {
 521              		.loc 1 182 25 is_stmt 1 discriminator 1 view .LVU124
 522 005c 0328     		cmp	r0, #3
 523 005e 03D8     		bhi	.L46
 184:Src/touch.c   ****         {
 524              		.loc 1 184 9 view .LVU125
 525              	.LBB8:
 184:Src/touch.c   ****         {
 526              		.loc 1 184 13 view .LVU126
 184:Src/touch.c   ****         {
 527              		.loc 1 184 21 is_stmt 0 view .LVU127
 528 0060 441C     		adds	r4, r0, #1
 529 0062 E4B2     		uxtb	r4, r4
 530              	.LVL70:
 184:Src/touch.c   ****         {
 531              		.loc 1 184 21 view .LVU128
 532 0064 2346     		mov	r3, r4
 184:Src/touch.c   ****         {
 533              		.loc 1 184 9 view .LVU129
 534 0066 E0E7     		b	.L38
 535              	.LVL71:
 536              	.L46:
 184:Src/touch.c   ****         {
 537              		.loc 1 184 9 view .LVU130
 538              	.LBE8:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 14


 539              	.LBE6:
 540              	.LBB9:
 191:Src/touch.c   ****             }
 192:Src/touch.c   ****         }
 193:Src/touch.c   ****     }
 194:Src/touch.c   ****     for (uint16_t i = TP_LOST_VAL; i < TP_READ_TIMES - TP_LOST_VAL; i++)   /* 去掉两端的丢弃值 */
 541              		.loc 1 194 19 view .LVU131
 542 0068 0123     		movs	r3, #1
 543              	.LBE9:
 175:Src/touch.c   ****     uint16_t data = 0;
 544              		.loc 1 175 14 view .LVU132
 545 006a 0020     		movs	r0, #0
 546              	.LVL72:
 175:Src/touch.c   ****     uint16_t data = 0;
 547              		.loc 1 175 14 view .LVU133
 548 006c 08E0     		b	.L42
 549              	.LVL73:
 550              	.L43:
 551              	.LBB10:
 195:Src/touch.c   ****     {
 196:Src/touch.c   ****         sum += buf[i];  /* 累加去掉丢弃值以后的数据. */
 552              		.loc 1 196 9 is_stmt 1 view .LVU134
 553              		.loc 1 196 19 is_stmt 0 view .LVU135
 554 006e 04AA     		add	r2, sp, #16
 555 0070 02EB4302 		add	r2, r2, r3, lsl #1
 556 0074 32F80C2C 		ldrh	r2, [r2, #-12]
 557              		.loc 1 196 13 view .LVU136
 558 0078 1044     		add	r0, r0, r2
 559              	.LVL74:
 560              		.loc 1 196 13 view .LVU137
 561 007a 80B2     		uxth	r0, r0
 562              	.LVL75:
 194:Src/touch.c   ****     {
 563              		.loc 1 194 70 is_stmt 1 discriminator 3 view .LVU138
 564 007c 0133     		adds	r3, r3, #1
 565              	.LVL76:
 194:Src/touch.c   ****     {
 566              		.loc 1 194 70 is_stmt 0 discriminator 3 view .LVU139
 567 007e 9BB2     		uxth	r3, r3
 568              	.LVL77:
 569              	.L42:
 194:Src/touch.c   ****     {
 570              		.loc 1 194 38 is_stmt 1 discriminator 1 view .LVU140
 571 0080 032B     		cmp	r3, #3
 572 0082 F4D9     		bls	.L43
 573              	.LBE10:
 197:Src/touch.c   ****     }
 198:Src/touch.c   ****     data = sum / (TP_READ_TIMES - 2 * TP_LOST_VAL);
 574              		.loc 1 198 5 view .LVU141
 575              		.loc 1 198 10 is_stmt 0 view .LVU142
 576 0084 034B     		ldr	r3, .L47
 577              	.LVL78:
 578              		.loc 1 198 10 view .LVU143
 579 0086 A3FB0030 		umull	r3, r0, r3, r0
 580              	.LVL79:
 199:Src/touch.c   ****     return data;
 581              		.loc 1 199 5 is_stmt 1 view .LVU144
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 15


 200:Src/touch.c   **** }
 582              		.loc 1 200 1 is_stmt 0 view .LVU145
 583 008a C0F34F00 		ubfx	r0, r0, #1, #16
 584              	.LVL80:
 585              		.loc 1 200 1 view .LVU146
 586 008e 05B0     		add	sp, sp, #20
 587              	.LCFI7:
 588              		.cfi_def_cfa_offset 12
 589              		@ sp needed
 590 0090 30BD     		pop	{r4, r5, pc}
 591              	.L48:
 592 0092 00BF     		.align	2
 593              	.L47:
 594 0094 ABAAAAAA 		.word	-1431655765
 595              		.cfi_endproc
 596              	.LFE74:
 598              		.section	.text.touch_readXY,"ax",%progbits
 599              		.align	1
 600              		.global	touch_readXY
 601              		.syntax unified
 602              		.thumb
 603              		.thumb_func
 605              	touch_readXY:
 606              	.LVL81:
 607              	.LFB75:
 201:Src/touch.c   **** 
 202:Src/touch.c   **** /**
 203:Src/touch.c   ****  * @brief       读取x, y坐标
 204:Src/touch.c   ****  * @param       x,y: 读取到的坐标值
 205:Src/touch.c   ****  * @retval      无
 206:Src/touch.c   ****  */
 207:Src/touch.c   **** void touch_readXY(uint16_t *x,uint16_t *y)
 208:Src/touch.c   **** {
 608              		.loc 1 208 1 is_stmt 1 view -0
 609              		.cfi_startproc
 610              		@ args = 0, pretend = 0, frame = 0
 611              		@ frame_needed = 0, uses_anonymous_args = 0
 612              		.loc 1 208 1 is_stmt 0 view .LVU148
 613 0000 38B5     		push	{r3, r4, r5, lr}
 614              	.LCFI8:
 615              		.cfi_def_cfa_offset 16
 616              		.cfi_offset 3, -16
 617              		.cfi_offset 4, -12
 618              		.cfi_offset 5, -8
 619              		.cfi_offset 14, -4
 620 0002 0546     		mov	r5, r0
 621 0004 0C46     		mov	r4, r1
 209:Src/touch.c   ****     *x = touch_readXOY(0xD0);
 622              		.loc 1 209 5 is_stmt 1 view .LVU149
 623              		.loc 1 209 10 is_stmt 0 view .LVU150
 624 0006 D020     		movs	r0, #208
 625              	.LVL82:
 626              		.loc 1 209 10 view .LVU151
 627 0008 FFF7FEFF 		bl	touch_readXOY
 628              	.LVL83:
 629              		.loc 1 209 8 discriminator 1 view .LVU152
 630 000c 2880     		strh	r0, [r5]	@ movhi
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 16


 210:Src/touch.c   ****     *y = touch_readXOY(0x90);
 631              		.loc 1 210 5 is_stmt 1 view .LVU153
 632              		.loc 1 210 10 is_stmt 0 view .LVU154
 633 000e 9020     		movs	r0, #144
 634 0010 FFF7FEFF 		bl	touch_readXOY
 635              	.LVL84:
 636              		.loc 1 210 8 discriminator 1 view .LVU155
 637 0014 2080     		strh	r0, [r4]	@ movhi
 211:Src/touch.c   **** }
 638              		.loc 1 211 1 view .LVU156
 639 0016 38BD     		pop	{r3, r4, r5, pc}
 640              		.loc 1 211 1 view .LVU157
 641              		.cfi_endproc
 642              	.LFE75:
 644              		.section	.text.touch_readXY2,"ax",%progbits
 645              		.align	1
 646              		.global	touch_readXY2
 647              		.syntax unified
 648              		.thumb
 649              		.thumb_func
 651              	touch_readXY2:
 652              	.LVL85:
 653              	.LFB76:
 212:Src/touch.c   **** 
 213:Src/touch.c   **** /**
 214:Src/touch.c   ****  * @brief       连续读取2次触摸IC数据, 并滤波
 215:Src/touch.c   ****  *   @note      连续2次读取触摸屏IC,且这两次的偏差不能超过ERR_RANGE,满足
 216:Src/touch.c   ****  *              条件,则认为读数正确,否则读数错误.该函数能大大提高准确度.
 217:Src/touch.c   ****  *
 218:Src/touch.c   ****  * @param       x,y: 读取到的坐标值
 219:Src/touch.c   ****  * @retval      0, 失败; 1, 成功;
 220:Src/touch.c   ****  */
 221:Src/touch.c   **** uint8_t touch_readXY2(uint16_t *x,uint16_t *y)
 222:Src/touch.c   **** {
 654              		.loc 1 222 1 is_stmt 1 view -0
 655              		.cfi_startproc
 656              		@ args = 0, pretend = 0, frame = 8
 657              		@ frame_needed = 0, uses_anonymous_args = 0
 658              		.loc 1 222 1 is_stmt 0 view .LVU159
 659 0000 30B5     		push	{r4, r5, lr}
 660              	.LCFI9:
 661              		.cfi_def_cfa_offset 12
 662              		.cfi_offset 4, -12
 663              		.cfi_offset 5, -8
 664              		.cfi_offset 14, -4
 665 0002 83B0     		sub	sp, sp, #12
 666              	.LCFI10:
 667              		.cfi_def_cfa_offset 24
 668 0004 0546     		mov	r5, r0
 669 0006 0C46     		mov	r4, r1
 223:Src/touch.c   ****     uint16_t x1,y1;
 670              		.loc 1 223 5 is_stmt 1 view .LVU160
 224:Src/touch.c   ****     uint16_t x2,y2;
 671              		.loc 1 224 5 view .LVU161
 225:Src/touch.c   ****     touch_readXY(&x1,&y1);
 672              		.loc 1 225 5 view .LVU162
 673 0008 01A9     		add	r1, sp, #4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 17


 674              	.LVL86:
 675              		.loc 1 225 5 is_stmt 0 view .LVU163
 676 000a 0DF10600 		add	r0, sp, #6
 677              	.LVL87:
 678              		.loc 1 225 5 view .LVU164
 679 000e FFF7FEFF 		bl	touch_readXY
 680              	.LVL88:
 226:Src/touch.c   ****     touch_readXY(&x2,&y2);
 681              		.loc 1 226 5 is_stmt 1 view .LVU165
 682 0012 6946     		mov	r1, sp
 683 0014 0DF10200 		add	r0, sp, #2
 684 0018 FFF7FEFF 		bl	touch_readXY
 685              	.LVL89:
 227:Src/touch.c   ****     if (((x2 <= x1 && x1 < x2 + 50) || (x1 <= x2 && x2 < x1 + 50)) &&
 686              		.loc 1 227 5 view .LVU166
 687              		.loc 1 227 14 is_stmt 0 view .LVU167
 688 001c BDF80230 		ldrh	r3, [sp, #2]
 689 0020 BDF80620 		ldrh	r2, [sp, #6]
 690              		.loc 1 227 8 view .LVU168
 691 0024 9342     		cmp	r3, r2
 692 0026 03D8     		bhi	.L52
 693              		.loc 1 227 26 discriminator 1 view .LVU169
 694 0028 03F13101 		add	r1, r3, #49
 695              		.loc 1 227 20 discriminator 1 view .LVU170
 696 002c 9142     		cmp	r1, r2
 697 002e 05DA     		bge	.L53
 698              	.L52:
 699              		.loc 1 227 37 discriminator 4 view .LVU171
 700 0030 9342     		cmp	r3, r2
 701 0032 20D3     		bcc	.L57
 702              		.loc 1 227 56 discriminator 5 view .LVU172
 703 0034 02F13101 		add	r1, r2, #49
 704              		.loc 1 227 50 discriminator 5 view .LVU173
 705 0038 9942     		cmp	r1, r3
 706 003a 1FDB     		blt	.L58
 707              	.L53:
 228:Src/touch.c   ****             ((y2 <= y1 && y1 < y2 + 50) || (y1 <= y2 && y2 < y1 + 50)))
 708              		.loc 1 228 18 view .LVU174
 709 003c BDF80000 		ldrh	r0, [sp]
 710 0040 BDF80410 		ldrh	r1, [sp, #4]
 227:Src/touch.c   ****     if (((x2 <= x1 && x1 < x2 + 50) || (x1 <= x2 && x2 < x1 + 50)) &&
 711              		.loc 1 227 68 discriminator 6 view .LVU175
 712 0044 8842     		cmp	r0, r1
 713 0046 03D8     		bhi	.L55
 714              		.loc 1 228 30 view .LVU176
 715 0048 00F1310C 		add	ip, r0, #49
 716              		.loc 1 228 24 view .LVU177
 717 004c 8C45     		cmp	ip, r1
 718 004e 06DA     		bge	.L56
 719              	.L55:
 720              		.loc 1 228 41 discriminator 1 view .LVU178
 721 0050 8842     		cmp	r0, r1
 722 0052 15D3     		bcc	.L59
 723              		.loc 1 228 60 discriminator 2 view .LVU179
 724 0054 3131     		adds	r1, r1, #49
 725              		.loc 1 228 54 discriminator 2 view .LVU180
 726 0056 8142     		cmp	r1, r0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 18


 727 0058 01DA     		bge	.L56
 229:Src/touch.c   ****     {
 230:Src/touch.c   ****         *x = (x1 + x2) / 2;
 231:Src/touch.c   ****         *y = (y1 + y2) / 2;
 232:Src/touch.c   ****         return 1;
 233:Src/touch.c   ****     }
 234:Src/touch.c   ****     return 0;
 728              		.loc 1 234 12 view .LVU181
 729 005a 0020     		movs	r0, #0
 730 005c 0CE0     		b	.L54
 731              	.L56:
 230:Src/touch.c   ****         *y = (y1 + y2) / 2;
 732              		.loc 1 230 9 is_stmt 1 view .LVU182
 230:Src/touch.c   ****         *y = (y1 + y2) / 2;
 733              		.loc 1 230 24 is_stmt 0 view .LVU183
 734 005e 1344     		add	r3, r3, r2
 735 0060 5B10     		asrs	r3, r3, #1
 230:Src/touch.c   ****         *y = (y1 + y2) / 2;
 736              		.loc 1 230 12 view .LVU184
 737 0062 2B80     		strh	r3, [r5]	@ movhi
 231:Src/touch.c   ****         return 1;
 738              		.loc 1 231 9 is_stmt 1 view .LVU185
 231:Src/touch.c   ****         return 1;
 739              		.loc 1 231 18 is_stmt 0 view .LVU186
 740 0064 BDF80430 		ldrh	r3, [sp, #4]
 741 0068 BDF80020 		ldrh	r2, [sp]
 231:Src/touch.c   ****         return 1;
 742              		.loc 1 231 24 view .LVU187
 743 006c 1344     		add	r3, r3, r2
 744 006e 5B10     		asrs	r3, r3, #1
 231:Src/touch.c   ****         return 1;
 745              		.loc 1 231 12 view .LVU188
 746 0070 2380     		strh	r3, [r4]	@ movhi
 232:Src/touch.c   ****     }
 747              		.loc 1 232 9 is_stmt 1 view .LVU189
 232:Src/touch.c   ****     }
 748              		.loc 1 232 16 is_stmt 0 view .LVU190
 749 0072 0120     		movs	r0, #1
 750 0074 00E0     		b	.L54
 751              	.L57:
 752              		.loc 1 234 12 view .LVU191
 753 0076 0020     		movs	r0, #0
 754              	.L54:
 235:Src/touch.c   **** }
 755              		.loc 1 235 1 view .LVU192
 756 0078 03B0     		add	sp, sp, #12
 757              	.LCFI11:
 758              		.cfi_remember_state
 759              		.cfi_def_cfa_offset 12
 760              		@ sp needed
 761 007a 30BD     		pop	{r4, r5, pc}
 762              	.LVL90:
 763              	.L58:
 764              	.LCFI12:
 765              		.cfi_restore_state
 234:Src/touch.c   **** }
 766              		.loc 1 234 12 view .LVU193
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 19


 767 007c 0020     		movs	r0, #0
 768 007e FBE7     		b	.L54
 769              	.L59:
 770 0080 0020     		movs	r0, #0
 771 0082 F9E7     		b	.L54
 772              		.cfi_endproc
 773              	.LFE76:
 775              		.global	__aeabi_i2f
 776              		.global	__aeabi_fdiv
 777              		.global	__aeabi_fadd
 778              		.global	__aeabi_f2uiz
 779              		.section	.text.touchScan,"ax",%progbits
 780              		.align	1
 781              		.global	touchScan
 782              		.syntax unified
 783              		.thumb
 784              		.thumb_func
 786              	touchScan:
 787              	.LVL91:
 788              	.LFB79:
 236:Src/touch.c   **** 
 237:Src/touch.c   **** /**
 238:Src/touch.c   ****  * @brief       画一个校准用的触摸点(十字架)
 239:Src/touch.c   ****  * @param       x,y   : 坐标
 240:Src/touch.c   ****  * @param       color : 颜色
 241:Src/touch.c   ****  * @retval      无
 242:Src/touch.c   ****  */
 243:Src/touch.c   **** void touch_drawPoint(uint16_t x, uint16_t y, uint16_t color)
 244:Src/touch.c   **** {
 245:Src/touch.c   ****     LCD_drawLine(x - 12, y, x + 13, y, color); /* 横线 */
 246:Src/touch.c   ****     LCD_drawLine(x, y - 12, x, y + 13, color); /* 竖线 */
 247:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 248:Src/touch.c   ****     LCD_drawPoint(x - 1, y + 1, color);
 249:Src/touch.c   ****     LCD_drawPoint(x + 1, y - 1, color);
 250:Src/touch.c   ****     LCD_drawPoint(x - 1, y - 1, color);
 251:Src/touch.c   ****     LCD_drawCircle(x, y, 6, color);            /* 画中心圈 */
 252:Src/touch.c   **** }
 253:Src/touch.c   **** 
 254:Src/touch.c   **** /**
 255:Src/touch.c   ****  * @brief       画一个大点(2*2的点)
 256:Src/touch.c   ****  * @param       x,y   : 坐标
 257:Src/touch.c   ****  * @param       color : 颜色
 258:Src/touch.c   ****  * @retval      无
 259:Src/touch.c   ****  */
 260:Src/touch.c   **** void touch_drawBigPoint(uint16_t x, uint16_t y, uint16_t color)
 261:Src/touch.c   **** {
 262:Src/touch.c   ****     LCD_drawPoint(x, y, color);       /* 中心点 */
 263:Src/touch.c   ****     LCD_drawPoint(x + 1, y, color);
 264:Src/touch.c   ****     LCD_drawPoint(x, y + 1, color);
 265:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 266:Src/touch.c   **** }
 267:Src/touch.c   **** 
 268:Src/touch.c   **** /**
 269:Src/touch.c   ****  * @brief       触摸按键扫描
 270:Src/touch.c   ****  * @param       mode: 坐标模式
 271:Src/touch.c   ****  *   @arg       0, 屏幕坐标;
 272:Src/touch.c   ****  *   @arg       1, 物理坐标(校准等特殊场合用)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 20


 273:Src/touch.c   ****  *
 274:Src/touch.c   ****  * @retval      0, 触屏无触摸; 1, 触屏有触摸;
 275:Src/touch.c   ****  */
 276:Src/touch.c   **** uint8_t touchScan(uint8_t mode)
 277:Src/touch.c   **** {
 789              		.loc 1 277 1 is_stmt 1 view -0
 790              		.cfi_startproc
 791              		@ args = 0, pretend = 0, frame = 0
 792              		@ frame_needed = 0, uses_anonymous_args = 0
 793              		.loc 1 277 1 is_stmt 0 view .LVU195
 794 0000 38B5     		push	{r3, r4, r5, lr}
 795              	.LCFI13:
 796              		.cfi_def_cfa_offset 16
 797              		.cfi_offset 3, -16
 798              		.cfi_offset 4, -12
 799              		.cfi_offset 5, -8
 800              		.cfi_offset 14, -4
 801 0002 0446     		mov	r4, r0
 278:Src/touch.c   ****     if (HAL_GPIO_ReadPin(TOUCH_PEN_PORT,TOUCH_PEN_PIN) == 0)     /* 有按键按下 */
 802              		.loc 1 278 5 is_stmt 1 view .LVU196
 803              		.loc 1 278 9 is_stmt 0 view .LVU197
 804 0004 4FF48061 		mov	r1, #1024
 805 0008 2C48     		ldr	r0, .L70
 806              	.LVL92:
 807              		.loc 1 278 9 view .LVU198
 808 000a FFF7FEFF 		bl	HAL_GPIO_ReadPin
 809              	.LVL93:
 810              		.loc 1 278 8 discriminator 1 view .LVU199
 811 000e 0028     		cmp	r0, #0
 812 0010 3FD1     		bne	.L63
 279:Src/touch.c   ****     {
 280:Src/touch.c   ****         if (mode)       /* 读取物理坐标, 无需转换 */
 813              		.loc 1 280 9 is_stmt 1 view .LVU200
 814              		.loc 1 280 12 is_stmt 0 view .LVU201
 815 0012 9CB1     		cbz	r4, .L64
 281:Src/touch.c   ****         {
 282:Src/touch.c   ****             touch_readXY2(&touch_dev.x[0], &touch_dev.y[0]);
 816              		.loc 1 282 13 is_stmt 1 view .LVU202
 817 0014 2A49     		ldr	r1, .L70+4
 818 0016 A1F11400 		sub	r0, r1, #20
 819 001a FFF7FEFF 		bl	touch_readXY2
 820              	.LVL94:
 821              	.L65:
 283:Src/touch.c   ****         }
 284:Src/touch.c   ****         else if (touch_readXY2(&touch_dev.x[0], &touch_dev.y[0]))     /* 读取屏幕坐标, 需要转换 */
 285:Src/touch.c   ****         {
 286:Src/touch.c   ****             /* 将X轴 物理坐标转换成逻辑坐标(即对应LCD屏幕上面的X坐标值) */
 287:Src/touch.c   ****             touch_dev.x[0] = (signed short)(touch_dev.x[0] - touch_dev.xc) / touch_dev.xfac + width
 288:Src/touch.c   **** 
 289:Src/touch.c   ****             /* 将Y轴 物理坐标转换成逻辑坐标(即对应LCD屏幕上面的Y坐标值) */
 290:Src/touch.c   ****             touch_dev.y[0] = (signed short)(touch_dev.y[0] - touch_dev.yc) / touch_dev.yfac + lengt
 291:Src/touch.c   ****         }
 292:Src/touch.c   **** 
 293:Src/touch.c   ****         if ((touch_dev.sta & TP_PRES_DOWN) == 0)   /* 之前没有被按下 */
 822              		.loc 1 293 9 view .LVU203
 823              		.loc 1 293 23 is_stmt 0 view .LVU204
 824 001e 294B     		ldr	r3, .L70+8
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 21


 825              		.loc 1 293 44 view .LVU205
 826 0020 B3F93430 		ldrsh	r3, [r3, #52]
 827              		.loc 1 293 12 view .LVU206
 828 0024 002B     		cmp	r3, #0
 829 0026 07DB     		blt	.L66
 294:Src/touch.c   ****         {
 295:Src/touch.c   ****             touch_dev.sta = TP_PRES_DOWN | TP_CATH_PRES;   /* 按键按下 */
 830              		.loc 1 295 13 is_stmt 1 view .LVU207
 831              		.loc 1 295 27 is_stmt 0 view .LVU208
 832 0028 264B     		ldr	r3, .L70+8
 833 002a 4FF44042 		mov	r2, #49152
 834 002e 9A86     		strh	r2, [r3, #52]	@ movhi
 296:Src/touch.c   ****             touch_dev.x[CT_MAX_TOUCH - 1] = touch_dev.x[0];   /* 记录第一次按下时的坐标 */
 835              		.loc 1 296 13 is_stmt 1 view .LVU209
 836              		.loc 1 296 56 is_stmt 0 view .LVU210
 837 0030 9A89     		ldrh	r2, [r3, #12]
 838              		.loc 1 296 43 view .LVU211
 839 0032 DA83     		strh	r2, [r3, #30]	@ movhi
 297:Src/touch.c   ****             touch_dev.y[CT_MAX_TOUCH - 1] = touch_dev.y[0];
 840              		.loc 1 297 13 is_stmt 1 view .LVU212
 841              		.loc 1 297 56 is_stmt 0 view .LVU213
 842 0034 1A8C     		ldrh	r2, [r3, #32]
 843              		.loc 1 297 43 view .LVU214
 844 0036 5A86     		strh	r2, [r3, #50]	@ movhi
 845              	.L66:
 298:Src/touch.c   ****         }
 299:Src/touch.c   ****     }
 300:Src/touch.c   ****     else
 301:Src/touch.c   ****     {
 302:Src/touch.c   ****         if (touch_dev.sta & TP_PRES_DOWN)      /* 之前是被按下的 */
 303:Src/touch.c   ****         {
 304:Src/touch.c   ****             touch_dev.sta &= ~TP_PRES_DOWN;    /* 标记按键松开 */
 305:Src/touch.c   ****         }
 306:Src/touch.c   ****         else     /* 之前就没有被按下 */
 307:Src/touch.c   ****         {
 308:Src/touch.c   ****             touch_dev.x[CT_MAX_TOUCH - 1] = 0;
 309:Src/touch.c   ****             touch_dev.y[CT_MAX_TOUCH - 1] = 0;
 310:Src/touch.c   ****             touch_dev.x[0] = 0xFFFF;
 311:Src/touch.c   ****             touch_dev.y[0] = 0xFFFF;
 312:Src/touch.c   ****         }
 313:Src/touch.c   ****     }
 314:Src/touch.c   **** 
 315:Src/touch.c   ****     return touch_dev.sta & TP_PRES_DOWN; /* 返回当前的触屏状态 */
 846              		.loc 1 315 5 is_stmt 1 view .LVU215
 316:Src/touch.c   **** }
 847              		.loc 1 316 1 is_stmt 0 view .LVU216
 848 0038 0020     		movs	r0, #0
 849 003a 38BD     		pop	{r3, r4, r5, pc}
 850              	.L64:
 284:Src/touch.c   ****         {
 851              		.loc 1 284 14 is_stmt 1 view .LVU217
 284:Src/touch.c   ****         {
 852              		.loc 1 284 18 is_stmt 0 view .LVU218
 853 003c 2049     		ldr	r1, .L70+4
 854 003e A1F11400 		sub	r0, r1, #20
 855 0042 FFF7FEFF 		bl	touch_readXY2
 856              	.LVL95:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 22


 284:Src/touch.c   ****         {
 857              		.loc 1 284 17 discriminator 1 view .LVU219
 858 0046 0028     		cmp	r0, #0
 859 0048 E9D0     		beq	.L65
 287:Src/touch.c   **** 
 860              		.loc 1 287 13 is_stmt 1 view .LVU220
 287:Src/touch.c   **** 
 861              		.loc 1 287 56 is_stmt 0 view .LVU221
 862 004a 1E4C     		ldr	r4, .L70+8
 863 004c A089     		ldrh	r0, [r4, #12]
 287:Src/touch.c   **** 
 864              		.loc 1 287 71 view .LVU222
 865 004e B4F84030 		ldrh	r3, [r4, #64]
 287:Src/touch.c   **** 
 866              		.loc 1 287 60 view .LVU223
 867 0052 C01A     		subs	r0, r0, r3
 287:Src/touch.c   **** 
 868              		.loc 1 287 87 view .LVU224
 869 0054 A56B     		ldr	r5, [r4, #56]	@ float
 287:Src/touch.c   **** 
 870              		.loc 1 287 76 view .LVU225
 871 0056 00B2     		sxth	r0, r0
 872 0058 FFF7FEFF 		bl	__aeabi_i2f
 873              	.LVL96:
 874 005c 2946     		mov	r1, r5
 875 005e FFF7FEFF 		bl	__aeabi_fdiv
 876              	.LVL97:
 287:Src/touch.c   **** 
 877              		.loc 1 287 93 view .LVU226
 878 0062 1949     		ldr	r1, .L70+12
 879 0064 FFF7FEFF 		bl	__aeabi_fadd
 880              	.LVL98:
 287:Src/touch.c   **** 
 881              		.loc 1 287 28 view .LVU227
 882 0068 FFF7FEFF 		bl	__aeabi_f2uiz
 883              	.LVL99:
 884 006c A081     		strh	r0, [r4, #12]	@ movhi
 290:Src/touch.c   ****         }
 885              		.loc 1 290 13 is_stmt 1 view .LVU228
 290:Src/touch.c   ****         }
 886              		.loc 1 290 56 is_stmt 0 view .LVU229
 887 006e 208C     		ldrh	r0, [r4, #32]
 290:Src/touch.c   ****         }
 888              		.loc 1 290 71 view .LVU230
 889 0070 B4F84230 		ldrh	r3, [r4, #66]
 290:Src/touch.c   ****         }
 890              		.loc 1 290 60 view .LVU231
 891 0074 C01A     		subs	r0, r0, r3
 290:Src/touch.c   ****         }
 892              		.loc 1 290 87 view .LVU232
 893 0076 E56B     		ldr	r5, [r4, #60]	@ float
 290:Src/touch.c   ****         }
 894              		.loc 1 290 76 view .LVU233
 895 0078 00B2     		sxth	r0, r0
 896 007a FFF7FEFF 		bl	__aeabi_i2f
 897              	.LVL100:
 898 007e 2946     		mov	r1, r5
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 23


 899 0080 FFF7FEFF 		bl	__aeabi_fdiv
 900              	.LVL101:
 290:Src/touch.c   ****         }
 901              		.loc 1 290 93 view .LVU234
 902 0084 1149     		ldr	r1, .L70+16
 903 0086 FFF7FEFF 		bl	__aeabi_fadd
 904              	.LVL102:
 290:Src/touch.c   ****         }
 905              		.loc 1 290 28 view .LVU235
 906 008a FFF7FEFF 		bl	__aeabi_f2uiz
 907              	.LVL103:
 908 008e 2084     		strh	r0, [r4, #32]	@ movhi
 909 0090 C5E7     		b	.L65
 910              	.L63:
 302:Src/touch.c   ****         {
 911              		.loc 1 302 9 is_stmt 1 view .LVU236
 302:Src/touch.c   ****         {
 912              		.loc 1 302 22 is_stmt 0 view .LVU237
 913 0092 0C4B     		ldr	r3, .L70+8
 914 0094 9A8E     		ldrh	r2, [r3, #52]
 302:Src/touch.c   ****         {
 915              		.loc 1 302 13 view .LVU238
 916 0096 B3F93430 		ldrsh	r3, [r3, #52]
 302:Src/touch.c   ****         {
 917              		.loc 1 302 12 view .LVU239
 918 009a 002B     		cmp	r3, #0
 919 009c 08DB     		blt	.L69
 308:Src/touch.c   ****             touch_dev.y[CT_MAX_TOUCH - 1] = 0;
 920              		.loc 1 308 13 is_stmt 1 view .LVU240
 308:Src/touch.c   ****             touch_dev.y[CT_MAX_TOUCH - 1] = 0;
 921              		.loc 1 308 43 is_stmt 0 view .LVU241
 922 009e 094B     		ldr	r3, .L70+8
 923 00a0 0022     		movs	r2, #0
 924 00a2 DA83     		strh	r2, [r3, #30]	@ movhi
 309:Src/touch.c   ****             touch_dev.x[0] = 0xFFFF;
 925              		.loc 1 309 13 is_stmt 1 view .LVU242
 309:Src/touch.c   ****             touch_dev.x[0] = 0xFFFF;
 926              		.loc 1 309 43 is_stmt 0 view .LVU243
 927 00a4 5A86     		strh	r2, [r3, #50]	@ movhi
 310:Src/touch.c   ****             touch_dev.y[0] = 0xFFFF;
 928              		.loc 1 310 13 is_stmt 1 view .LVU244
 310:Src/touch.c   ****             touch_dev.y[0] = 0xFFFF;
 929              		.loc 1 310 28 is_stmt 0 view .LVU245
 930 00a6 4FF6FF72 		movw	r2, #65535
 931 00aa 9A81     		strh	r2, [r3, #12]	@ movhi
 311:Src/touch.c   ****         }
 932              		.loc 1 311 13 is_stmt 1 view .LVU246
 311:Src/touch.c   ****         }
 933              		.loc 1 311 28 is_stmt 0 view .LVU247
 934 00ac 1A84     		strh	r2, [r3, #32]	@ movhi
 935 00ae C3E7     		b	.L66
 936              	.L69:
 304:Src/touch.c   ****         }
 937              		.loc 1 304 13 is_stmt 1 view .LVU248
 304:Src/touch.c   ****         }
 938              		.loc 1 304 27 is_stmt 0 view .LVU249
 939 00b0 C2F30E02 		ubfx	r2, r2, #0, #15
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 24


 940 00b4 034B     		ldr	r3, .L70+8
 941 00b6 9A86     		strh	r2, [r3, #52]	@ movhi
 942 00b8 BEE7     		b	.L66
 943              	.L71:
 944 00ba 00BF     		.align	2
 945              	.L70:
 946 00bc 001C0140 		.word	1073814528
 947 00c0 20000000 		.word	touch_dev+32
 948 00c4 00000000 		.word	touch_dev
 949 00c8 0000F042 		.word	1123024896
 950 00cc 00002043 		.word	1126170624
 951              		.cfi_endproc
 952              	.LFE79:
 954              		.section	.text.touch_drawPoint,"ax",%progbits
 955              		.align	1
 956              		.global	touch_drawPoint
 957              		.syntax unified
 958              		.thumb
 959              		.thumb_func
 961              	touch_drawPoint:
 962              	.LVL104:
 963              	.LFB77:
 244:Src/touch.c   ****     LCD_drawLine(x - 12, y, x + 13, y, color); /* 横线 */
 964              		.loc 1 244 1 is_stmt 1 view -0
 965              		.cfi_startproc
 966              		@ args = 0, pretend = 0, frame = 0
 967              		@ frame_needed = 0, uses_anonymous_args = 0
 244:Src/touch.c   ****     LCD_drawLine(x - 12, y, x + 13, y, color); /* 横线 */
 968              		.loc 1 244 1 is_stmt 0 view .LVU251
 969 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 970              	.LCFI14:
 971              		.cfi_def_cfa_offset 28
 972              		.cfi_offset 4, -28
 973              		.cfi_offset 5, -24
 974              		.cfi_offset 6, -20
 975              		.cfi_offset 7, -16
 976              		.cfi_offset 8, -12
 977              		.cfi_offset 9, -8
 978              		.cfi_offset 14, -4
 979 0004 83B0     		sub	sp, sp, #12
 980              	.LCFI15:
 981              		.cfi_def_cfa_offset 40
 982 0006 0446     		mov	r4, r0
 983 0008 0E46     		mov	r6, r1
 984 000a 1546     		mov	r5, r2
 245:Src/touch.c   ****     LCD_drawLine(x, y - 12, x, y + 13, color); /* 竖线 */
 985              		.loc 1 245 5 is_stmt 1 view .LVU252
 986 000c 00F10D02 		add	r2, r0, #13
 987              	.LVL105:
 245:Src/touch.c   ****     LCD_drawLine(x, y - 12, x, y + 13, color); /* 竖线 */
 988              		.loc 1 245 5 is_stmt 0 view .LVU253
 989 0010 0C38     		subs	r0, r0, #12
 990              	.LVL106:
 245:Src/touch.c   ****     LCD_drawLine(x, y - 12, x, y + 13, color); /* 竖线 */
 991              		.loc 1 245 5 view .LVU254
 992 0012 0095     		str	r5, [sp]
 993 0014 0B46     		mov	r3, r1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 25


 994 0016 92B2     		uxth	r2, r2
 995 0018 80B2     		uxth	r0, r0
 996 001a FFF7FEFF 		bl	LCD_drawLine
 997              	.LVL107:
 246:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 998              		.loc 1 246 5 is_stmt 1 view .LVU255
 999 001e 06F10D03 		add	r3, r6, #13
 1000 0022 A6F10C01 		sub	r1, r6, #12
 1001 0026 0095     		str	r5, [sp]
 1002 0028 9BB2     		uxth	r3, r3
 1003 002a 2246     		mov	r2, r4
 1004 002c 89B2     		uxth	r1, r1
 1005 002e 2046     		mov	r0, r4
 1006 0030 FFF7FEFF 		bl	LCD_drawLine
 1007              	.LVL108:
 247:Src/touch.c   ****     LCD_drawPoint(x - 1, y + 1, color);
 1008              		.loc 1 247 5 view .LVU256
 1009 0034 04F10109 		add	r9, r4, #1
 1010 0038 1FFA89F9 		uxth	r9, r9
 1011 003c 06F10108 		add	r8, r6, #1
 1012 0040 1FFA88F8 		uxth	r8, r8
 1013 0044 2A46     		mov	r2, r5
 1014 0046 4146     		mov	r1, r8
 1015 0048 4846     		mov	r0, r9
 1016 004a FFF7FEFF 		bl	LCD_drawPoint
 1017              	.LVL109:
 248:Src/touch.c   ****     LCD_drawPoint(x + 1, y - 1, color);
 1018              		.loc 1 248 5 view .LVU257
 1019 004e 671E     		subs	r7, r4, #1
 1020 0050 BFB2     		uxth	r7, r7
 1021 0052 2A46     		mov	r2, r5
 1022 0054 4146     		mov	r1, r8
 1023 0056 3846     		mov	r0, r7
 1024 0058 FFF7FEFF 		bl	LCD_drawPoint
 1025              	.LVL110:
 249:Src/touch.c   ****     LCD_drawPoint(x - 1, y - 1, color);
 1026              		.loc 1 249 5 view .LVU258
 1027 005c 06F1FF38 		add	r8, r6, #-1
 1028 0060 1FFA88F8 		uxth	r8, r8
 1029 0064 2A46     		mov	r2, r5
 1030 0066 4146     		mov	r1, r8
 1031 0068 4846     		mov	r0, r9
 1032 006a FFF7FEFF 		bl	LCD_drawPoint
 1033              	.LVL111:
 250:Src/touch.c   ****     LCD_drawCircle(x, y, 6, color);            /* 画中心圈 */
 1034              		.loc 1 250 5 view .LVU259
 1035 006e 2A46     		mov	r2, r5
 1036 0070 4146     		mov	r1, r8
 1037 0072 3846     		mov	r0, r7
 1038 0074 FFF7FEFF 		bl	LCD_drawPoint
 1039              	.LVL112:
 251:Src/touch.c   **** }
 1040              		.loc 1 251 5 view .LVU260
 1041 0078 2B46     		mov	r3, r5
 1042 007a 0622     		movs	r2, #6
 1043 007c 3146     		mov	r1, r6
 1044 007e 2046     		mov	r0, r4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 26


 1045 0080 FFF7FEFF 		bl	LCD_drawCircle
 1046              	.LVL113:
 252:Src/touch.c   **** 
 1047              		.loc 1 252 1 is_stmt 0 view .LVU261
 1048 0084 03B0     		add	sp, sp, #12
 1049              	.LCFI16:
 1050              		.cfi_def_cfa_offset 28
 1051              		@ sp needed
 1052 0086 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 252:Src/touch.c   **** 
 1053              		.loc 1 252 1 view .LVU262
 1054              		.cfi_endproc
 1055              	.LFE77:
 1057              		.section	.text.touch_drawBigPoint,"ax",%progbits
 1058              		.align	1
 1059              		.global	touch_drawBigPoint
 1060              		.syntax unified
 1061              		.thumb
 1062              		.thumb_func
 1064              	touch_drawBigPoint:
 1065              	.LVL114:
 1066              	.LFB78:
 261:Src/touch.c   ****     LCD_drawPoint(x, y, color);       /* 中心点 */
 1067              		.loc 1 261 1 is_stmt 1 view -0
 1068              		.cfi_startproc
 1069              		@ args = 0, pretend = 0, frame = 0
 1070              		@ frame_needed = 0, uses_anonymous_args = 0
 261:Src/touch.c   ****     LCD_drawPoint(x, y, color);       /* 中心点 */
 1071              		.loc 1 261 1 is_stmt 0 view .LVU264
 1072 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1073              	.LCFI17:
 1074              		.cfi_def_cfa_offset 24
 1075              		.cfi_offset 3, -24
 1076              		.cfi_offset 4, -20
 1077              		.cfi_offset 5, -16
 1078              		.cfi_offset 6, -12
 1079              		.cfi_offset 7, -8
 1080              		.cfi_offset 14, -4
 1081 0002 0746     		mov	r7, r0
 1082 0004 0C46     		mov	r4, r1
 1083 0006 1546     		mov	r5, r2
 262:Src/touch.c   ****     LCD_drawPoint(x + 1, y, color);
 1084              		.loc 1 262 5 is_stmt 1 view .LVU265
 1085 0008 FFF7FEFF 		bl	LCD_drawPoint
 1086              	.LVL115:
 263:Src/touch.c   ****     LCD_drawPoint(x, y + 1, color);
 1087              		.loc 1 263 5 view .LVU266
 1088 000c 7E1C     		adds	r6, r7, #1
 1089 000e B6B2     		uxth	r6, r6
 1090 0010 2A46     		mov	r2, r5
 1091 0012 2146     		mov	r1, r4
 1092 0014 3046     		mov	r0, r6
 1093 0016 FFF7FEFF 		bl	LCD_drawPoint
 1094              	.LVL116:
 264:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 1095              		.loc 1 264 5 view .LVU267
 1096 001a 0134     		adds	r4, r4, #1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 27


 1097              	.LVL117:
 264:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 1098              		.loc 1 264 5 is_stmt 0 view .LVU268
 1099 001c A4B2     		uxth	r4, r4
 1100              	.LVL118:
 264:Src/touch.c   ****     LCD_drawPoint(x + 1, y + 1, color);
 1101              		.loc 1 264 5 view .LVU269
 1102 001e 2A46     		mov	r2, r5
 1103 0020 2146     		mov	r1, r4
 1104 0022 3846     		mov	r0, r7
 1105 0024 FFF7FEFF 		bl	LCD_drawPoint
 1106              	.LVL119:
 265:Src/touch.c   **** }
 1107              		.loc 1 265 5 is_stmt 1 view .LVU270
 1108 0028 2A46     		mov	r2, r5
 1109 002a 2146     		mov	r1, r4
 1110 002c 3046     		mov	r0, r6
 1111 002e FFF7FEFF 		bl	LCD_drawPoint
 1112              	.LVL120:
 266:Src/touch.c   **** 
 1113              		.loc 1 266 1 is_stmt 0 view .LVU271
 1114 0032 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 266:Src/touch.c   **** 
 1115              		.loc 1 266 1 view .LVU272
 1116              		.cfi_endproc
 1117              	.LFE78:
 1119              		.section	.text.touch_saveAdjustData,"ax",%progbits
 1120              		.align	1
 1121              		.global	touch_saveAdjustData
 1122              		.syntax unified
 1123              		.thumb
 1124              		.thumb_func
 1126              	touch_saveAdjustData:
 1127              	.LFB81:
 317:Src/touch.c   **** 
 318:Src/touch.c   **** char *const TP_REMIND_MSG_TBL = "Please use the stylus click the cross on the screen.The cross will
 319:Src/touch.c   **** 
 320:Src/touch.c   **** /**
 321:Src/touch.c   ****  * @brief       触摸屏校准代码
 322:Src/touch.c   ****  *   @note      使用五点校准法(具体原理请百度)
 323:Src/touch.c   ****  *              本函数得到x轴/y轴比例因子xfac/yfac及物理中心坐标值(xc,yc)等4个参数
 324:Src/touch.c   ****  *              我们规定: 物理坐标即AD采集到的坐标值,范围是0~4095.
 325:Src/touch.c   ****  *                        逻辑坐标即LCD屏幕的坐标, 范围为LCD屏幕的分辨率.
 326:Src/touch.c   ****  *
 327:Src/touch.c   ****  * @param       无
 328:Src/touch.c   ****  * @retval      无
 329:Src/touch.c   ****  */
 330:Src/touch.c   **** void touchAdjust(void)
 331:Src/touch.c   **** {
 332:Src/touch.c   ****     double pxy[5][2];     /* 物理坐标缓存值 */
 333:Src/touch.c   ****     uint8_t  cnt = 0;
 334:Src/touch.c   ****     double s1, s2, s3, s4;   /* 4个点的坐标差值 */
 335:Src/touch.c   ****     double px, py;          /* X,Y轴物理坐标比例,用于判定是否校准成功 */
 336:Src/touch.c   ****     uint16_t outtime = 0;
 337:Src/touch.c   ****     cnt = 0;
 338:Src/touch.c   **** 
 339:Src/touch.c   ****     LCD_clear(WHITE);       /* 清屏 */
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 28


 340:Src/touch.c   ****     LCD_showString(40, 40, 160, 100, 16, TP_REMIND_MSG_TBL, RED,WHITE); /* 显示提示信息 */
 341:Src/touch.c   ****     touch_drawPoint(20, 20, RED);   /* 画点1 */
 342:Src/touch.c   ****     touch_dev.sta = 0;         /* 消除触发信号 */
 343:Src/touch.c   **** 
 344:Src/touch.c   ****     while (1)               /* 如果连续10秒钟没有按下,则自动退出 */
 345:Src/touch.c   ****     {
 346:Src/touch.c   ****         touch_dev.scan(1);     /* 扫描物理坐标 */
 347:Src/touch.c   **** 
 348:Src/touch.c   ****         if ((touch_dev.sta & 0xc000) == TP_CATH_PRES)   /* 按键按下了一次(此时按键松开了.) */
 349:Src/touch.c   ****         {
 350:Src/touch.c   ****             outtime = 0;
 351:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 352:Src/touch.c   **** 
 353:Src/touch.c   ****             pxy[cnt][0] = touch_dev.x[0];      /* 保存X物理坐标 */
 354:Src/touch.c   ****             pxy[cnt][1] = touch_dev.y[0];      /* 保存Y物理坐标 */
 355:Src/touch.c   ****             cnt++;
 356:Src/touch.c   **** 
 357:Src/touch.c   ****             switch (cnt)
 358:Src/touch.c   ****             {
 359:Src/touch.c   ****                 case 1:
 360:Src/touch.c   ****                     touch_drawPoint(20, 20, WHITE);                 /* 清除点1 */
 361:Src/touch.c   ****                     touch_drawPoint(width - 20, 20, RED);    /* 画点2 */
 362:Src/touch.c   ****                     break;
 363:Src/touch.c   **** 
 364:Src/touch.c   ****                 case 2:
 365:Src/touch.c   ****                     touch_drawPoint(width - 20, 20, WHITE);  /* 清除点2 */
 366:Src/touch.c   ****                     touch_drawPoint(20, length - 20, RED);   /* 画点3 */
 367:Src/touch.c   ****                     break;
 368:Src/touch.c   **** 
 369:Src/touch.c   ****                 case 3:
 370:Src/touch.c   ****                     touch_drawPoint(20, length - 20, WHITE); /* 清除点3 */
 371:Src/touch.c   ****                     touch_drawPoint(width - 20, length - 20, RED);    /* 画点4 */
 372:Src/touch.c   ****                     break;
 373:Src/touch.c   **** 
 374:Src/touch.c   ****                 case 4:
 375:Src/touch.c   ****                     LCD_clear(WHITE);   /* 画第五个点了, 直接清屏 */
 376:Src/touch.c   ****                     touch_drawPoint(width / 2, length / 2, RED);  /* 画点5 */
 377:Src/touch.c   ****                     break;
 378:Src/touch.c   **** 
 379:Src/touch.c   ****                 case 5:     /* 全部5个点已经得到 */
 380:Src/touch.c   ****                     s1 = pxy[1][0] - pxy[0][0]; /* 第2个点和第1个点的X轴物理坐标差值(AD值) */
 381:Src/touch.c   ****                     s3 = pxy[3][0] - pxy[2][0]; /* 第4个点和第3个点的X轴物理坐标差值(AD值) */
 382:Src/touch.c   ****                     s2 = pxy[3][1] - pxy[1][1]; /* 第4个点和第2个点的Y轴物理坐标差值(AD值) */
 383:Src/touch.c   ****                     s4 = pxy[2][1] - pxy[0][1]; /* 第3个点和第1个点的Y轴物理坐标差值(AD值) */
 384:Src/touch.c   ****                     LCD_showNum(160,0,s1,5,16,RED,WHITE);
 385:Src/touch.c   ****                     LCD_showNum(160,17,s2,5,16,RED,WHITE);
 386:Src/touch.c   ****                     LCD_showNum(160,34,s3,5,16,RED,WHITE);
 387:Src/touch.c   ****                     LCD_showNum(160,52,s4,5,16,RED,WHITE);
 388:Src/touch.c   ****                     px = (double)s1 / s3;       /* X轴比例因子 */
 389:Src/touch.c   ****                     py = (double)s2 / s4;       /* Y轴比例因子 */
 390:Src/touch.c   ****                     LCD_showNum(160,100,(double)px,5,16,RED,WHITE);
 391:Src/touch.c   ****                     LCD_showNum(160,120,py,5,16,RED,WHITE);
 392:Src/touch.c   ****                     if (px < 0)px = -px;        /* 负数改正数 */
 393:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 394:Src/touch.c   **** 
 395:Src/touch.c   ****                     if (px < 0.95 || px > 1.05 || py < 0.95 || py > 1.05 ||     /* 比例不合格 */
 396:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 29


 397:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 398:Src/touch.c   ****                        )
 399:Src/touch.c   ****                     {
 400:Src/touch.c   ****                         cnt = 0;
 401:Src/touch.c   ****                         touch_drawPoint(width / 2, length / 2, WHITE); /* 清除点5 */
 402:Src/touch.c   ****                         touch_drawPoint(20, 20, RED);   /* 重新画点1 */
 403:Src/touch.c   ****                         touch_adjustInfoShow(pxy, px, py);   /* 显示当前信息,方便找问题 */
 404:Src/touch.c   ****                         continue;
 405:Src/touch.c   ****                     }
 406:Src/touch.c   **** 
 407:Src/touch.c   ****                     touch_dev.xfac = (float)(s1 + s3) / (2 * (width - 40));
 408:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 409:Src/touch.c   **** 
 410:Src/touch.c   ****                     touch_dev.xc = pxy[4][0];      /* X轴,物理中心坐标 */
 411:Src/touch.c   ****                     touch_dev.yc = pxy[4][1];      /* Y轴,物理中心坐标 */
 412:Src/touch.c   **** 
 413:Src/touch.c   ****                     LCD_clear(WHITE);   /* 清屏 */
 414:Src/touch.c   ****                     LCD_showString(35, 110, width, length, 16, "Touch Screen Adjust OK!", BLUE,WHIT
 415:Src/touch.c   ****                     delay_ms(1000);
 416:Src/touch.c   ****                     touch_saveAdjustData();
 417:Src/touch.c   **** 
 418:Src/touch.c   ****                     LCD_clear(WHITE);/* 清屏 */
 419:Src/touch.c   ****                     return;/* 校正完成 */
 420:Src/touch.c   ****             }
 421:Src/touch.c   ****         }
 422:Src/touch.c   **** 
 423:Src/touch.c   ****         delay_ms(10);
 424:Src/touch.c   ****         outtime++;
 425:Src/touch.c   **** 
 426:Src/touch.c   ****         if (outtime > 1000)
 427:Src/touch.c   ****         {
 428:Src/touch.c   ****             touch_getAdjustData();
 429:Src/touch.c   ****             break;
 430:Src/touch.c   ****         }
 431:Src/touch.c   ****     }
 432:Src/touch.c   **** }
 433:Src/touch.c   **** 
 434:Src/touch.c   **** /**
 435:Src/touch.c   ****  * @brief       保存校准参数
 436:Src/touch.c   ****  *   @note      参数保存在EEPROM芯片里面(24C02),起始地址为TP_SAVE_ADDR_BASE.
 437:Src/touch.c   ****  *              占用大小为13字节
 438:Src/touch.c   ****  * @param       无
 439:Src/touch.c   ****  * @retval      无
 440:Src/touch.c   ****  */
 441:Src/touch.c   **** void touch_saveAdjustData(void)
 442:Src/touch.c   **** {
 1128              		.loc 1 442 1 is_stmt 1 view -0
 1129              		.cfi_startproc
 1130              		@ args = 0, pretend = 0, frame = 0
 1131              		@ frame_needed = 0, uses_anonymous_args = 0
 1132 0000 08B5     		push	{r3, lr}
 1133              	.LCFI18:
 1134              		.cfi_def_cfa_offset 8
 1135              		.cfi_offset 3, -8
 1136              		.cfi_offset 14, -4
 443:Src/touch.c   ****     uint8_t *p = (uint8_t *)&touch_dev.xfac;   /* 指向首地址 */
 1137              		.loc 1 443 5 view .LVU274
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 30


 1138              	.LVL121:
 444:Src/touch.c   **** 
 445:Src/touch.c   ****     /* p指向tp_dev.xfac的地址, p+4则是tp_dev.yfac的地址
 446:Src/touch.c   ****      * p+8则是tp_dev.xoff的地址,p+10,则是tp_dev.yoff的地址
 447:Src/touch.c   ****      * 总共占用12个字节(4个参数)
 448:Src/touch.c   ****      * p+12用于存放标记电阻触摸屏是否校准的数据(0X0A)
 449:Src/touch.c   ****      * 往p[12]写入0X0A. 标记已经校准过.
 450:Src/touch.c   ****      */
 451:Src/touch.c   ****     AT24C02_write(TP_SAVE_ADDR_BASE, p, 12);                /* 保存12个字节数据(xfac,yfac,xc,yc) */
 1139              		.loc 1 451 5 view .LVU275
 1140 0002 0C22     		movs	r2, #12
 1141 0004 0449     		ldr	r1, .L78
 1142              	.LVL122:
 1143              		.loc 1 451 5 is_stmt 0 view .LVU276
 1144 0006 2820     		movs	r0, #40
 1145 0008 FFF7FEFF 		bl	AT24C02_write
 1146              	.LVL123:
 452:Src/touch.c   ****     AT24C02_writeByte(TP_SAVE_ADDR_BASE + 12, 0X0A);   /* 保存校准值 */
 1147              		.loc 1 452 5 is_stmt 1 view .LVU277
 1148 000c 0A21     		movs	r1, #10
 1149 000e 3420     		movs	r0, #52
 1150 0010 FFF7FEFF 		bl	AT24C02_writeByte
 1151              	.LVL124:
 453:Src/touch.c   **** }
 1152              		.loc 1 453 1 is_stmt 0 view .LVU278
 1153 0014 08BD     		pop	{r3, pc}
 1154              	.L79:
 1155 0016 00BF     		.align	2
 1156              	.L78:
 1157 0018 38000000 		.word	touch_dev+56
 1158              		.cfi_endproc
 1159              	.LFE81:
 1161              		.section	.text.touch_getAdjustData,"ax",%progbits
 1162              		.align	1
 1163              		.global	touch_getAdjustData
 1164              		.syntax unified
 1165              		.thumb
 1166              		.thumb_func
 1168              	touch_getAdjustData:
 1169              	.LFB82:
 454:Src/touch.c   **** 
 455:Src/touch.c   **** /**
 456:Src/touch.c   ****  * @brief       获取保存在EEPROM里面的校准值
 457:Src/touch.c   ****  * @param       无
 458:Src/touch.c   ****  * @retval      0，获取失败，要重新校准
 459:Src/touch.c   ****  *              1，成功获取数据
 460:Src/touch.c   ****  */
 461:Src/touch.c   **** uint8_t touch_getAdjustData(void)
 462:Src/touch.c   **** {
 1170              		.loc 1 462 1 is_stmt 1 view -0
 1171              		.cfi_startproc
 1172              		@ args = 0, pretend = 0, frame = 0
 1173              		@ frame_needed = 0, uses_anonymous_args = 0
 1174 0000 08B5     		push	{r3, lr}
 1175              	.LCFI19:
 1176              		.cfi_def_cfa_offset 8
 1177              		.cfi_offset 3, -8
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 31


 1178              		.cfi_offset 14, -4
 463:Src/touch.c   ****     uint8_t *p = (uint8_t *)&touch_dev.xfac;
 1179              		.loc 1 463 5 view .LVU280
 1180              	.LVL125:
 464:Src/touch.c   ****     uint8_t temp = 0;
 1181              		.loc 1 464 5 view .LVU281
 465:Src/touch.c   **** 
 466:Src/touch.c   ****     /* 由于我们是直接指向tp_dev.xfac地址进行保存的, 读取的时候,将读取出来的数据
 467:Src/touch.c   ****      * 写入指向tp_dev.xfac的首地址, 就可以还原写入进去的值, 而不需要理会具体的数
 468:Src/touch.c   ****      * 据类型. 此方法适用于各种数据(包括结构体)的保存/读取(包括结构体).
 469:Src/touch.c   ****      */
 470:Src/touch.c   ****     AT24C02_read(TP_SAVE_ADDR_BASE, p, 12);                 /* 读取12字节数据 */
 1182              		.loc 1 470 5 view .LVU282
 1183 0002 0C22     		movs	r2, #12
 1184 0004 0649     		ldr	r1, .L84
 1185              	.LVL126:
 1186              		.loc 1 470 5 is_stmt 0 view .LVU283
 1187 0006 2820     		movs	r0, #40
 1188 0008 FFF7FEFF 		bl	AT24C02_read
 1189              	.LVL127:
 471:Src/touch.c   ****     temp = AT24C02_receiveByte(TP_SAVE_ADDR_BASE + 12);   /* 读取校准状态标记 */
 1190              		.loc 1 471 5 is_stmt 1 view .LVU284
 1191              		.loc 1 471 12 is_stmt 0 view .LVU285
 1192 000c 3420     		movs	r0, #52
 1193 000e FFF7FEFF 		bl	AT24C02_receiveByte
 1194              	.LVL128:
 472:Src/touch.c   ****     if (temp == 0X0A)
 1195              		.loc 1 472 5 is_stmt 1 view .LVU286
 1196              		.loc 1 472 8 is_stmt 0 view .LVU287
 1197 0012 0A28     		cmp	r0, #10
 1198 0014 01D0     		beq	.L82
 473:Src/touch.c   ****     {
 474:Src/touch.c   ****         return 1;
 475:Src/touch.c   ****     }
 476:Src/touch.c   ****     return 0;
 1199              		.loc 1 476 12 view .LVU288
 1200 0016 0020     		movs	r0, #0
 1201              	.LVL129:
 1202              	.L81:
 477:Src/touch.c   **** }
 1203              		.loc 1 477 1 view .LVU289
 1204 0018 08BD     		pop	{r3, pc}
 1205              	.LVL130:
 1206              	.L82:
 474:Src/touch.c   ****     }
 1207              		.loc 1 474 16 view .LVU290
 1208 001a 0120     		movs	r0, #1
 1209              	.LVL131:
 474:Src/touch.c   ****     }
 1210              		.loc 1 474 16 view .LVU291
 1211 001c FCE7     		b	.L81
 1212              	.L85:
 1213 001e 00BF     		.align	2
 1214              	.L84:
 1215 0020 38000000 		.word	touch_dev+56
 1216              		.cfi_endproc
 1217              	.LFE82:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 32


 1219              		.section	.rodata.touch_adjustInfoShow.str1.4,"aMS",%progbits,1
 1220              		.align	2
 1221              	.LC0:
 1222 0000 7825643A 		.ascii	"x%d:%d\000"
 1222      256400
 1223 0007 00       		.align	2
 1224              	.LC1:
 1225 0008 7925643A 		.ascii	"y%d:%d\000"
 1225      256400
 1226 000f 00       		.align	2
 1227              	.LC2:
 1228 0010 70783A25 		.ascii	"px:%0.2f\000"
 1228      302E3266 
 1228      00
 1229 0019 000000   		.align	2
 1230              	.LC3:
 1231 001c 70793A25 		.ascii	"py:%0.2f\000"
 1231      302E3266 
 1231      00
 1232              		.section	.text.touch_adjustInfoShow,"ax",%progbits
 1233              		.align	1
 1234              		.global	touch_adjustInfoShow
 1235              		.syntax unified
 1236              		.thumb
 1237              		.thumb_func
 1239              	touch_adjustInfoShow:
 1240              	.LVL132:
 1241              	.LFB83:
 478:Src/touch.c   **** 
 479:Src/touch.c   **** /**
 480:Src/touch.c   ****  * @brief       提示校准结果(各个参数)
 481:Src/touch.c   ****  * @param       xy[5][2]: 5个物理坐标值
 482:Src/touch.c   ****  * @param       px,py   : x,y方向的比例因子(约接近1越好)
 483:Src/touch.c   ****  * @retval      无
 484:Src/touch.c   ****  */
 485:Src/touch.c   **** void touch_adjustInfoShow(uint16_t xy[5][2], double px, double py)
 486:Src/touch.c   **** {
 1242              		.loc 1 486 1 is_stmt 1 view -0
 1243              		.cfi_startproc
 1244              		@ args = 8, pretend = 0, frame = 32
 1245              		@ frame_needed = 0, uses_anonymous_args = 0
 1246              		.loc 1 486 1 is_stmt 0 view .LVU293
 1247 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1248              	.LCFI20:
 1249              		.cfi_def_cfa_offset 32
 1250              		.cfi_offset 4, -32
 1251              		.cfi_offset 5, -28
 1252              		.cfi_offset 6, -24
 1253              		.cfi_offset 7, -20
 1254              		.cfi_offset 8, -16
 1255              		.cfi_offset 9, -12
 1256              		.cfi_offset 10, -8
 1257              		.cfi_offset 14, -4
 1258 0004 8CB0     		sub	sp, sp, #48
 1259              	.LCFI21:
 1260              		.cfi_def_cfa_offset 80
 1261 0006 8146     		mov	r9, r0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 33


 1262 0008 CDE90423 		strd	r2, [sp, #16]
 487:Src/touch.c   ****     uint8_t i;
 1263              		.loc 1 487 5 is_stmt 1 view .LVU294
 488:Src/touch.c   ****     char sbuf[20];
 1264              		.loc 1 488 5 view .LVU295
 489:Src/touch.c   **** 
 490:Src/touch.c   ****     for (i = 0; i < 5; i++)   /* 显示5个物理坐标值 */
 1265              		.loc 1 490 5 view .LVU296
 1266              	.LVL133:
 1267              		.loc 1 490 12 is_stmt 0 view .LVU297
 1268 000c 0024     		movs	r4, #0
 1269              		.loc 1 490 5 view .LVU298
 1270 000e 36E0     		b	.L87
 1271              	.LVL134:
 1272              	.L88:
 491:Src/touch.c   ****     {
 492:Src/touch.c   ****         sprintf(sbuf, "x%d:%d", i + 1, xy[i][0]);
 1273              		.loc 1 492 9 is_stmt 1 view .LVU299
 1274 0010 651C     		adds	r5, r4, #1
 1275              		.loc 1 492 42 is_stmt 0 view .LVU300
 1276 0012 09EB8406 		add	r6, r9, r4, lsl #2
 1277              		.loc 1 492 9 view .LVU301
 1278 0016 39F82430 		ldrh	r3, [r9, r4, lsl #2]
 1279 001a 2A46     		mov	r2, r5
 1280 001c 3849     		ldr	r1, .L90
 1281 001e 07A8     		add	r0, sp, #28
 1282 0020 FFF7FEFF 		bl	sprintf
 1283              	.LVL135:
 493:Src/touch.c   ****         LCD_showString(40, 160 + (i * 20), width, length, 16, sbuf, RED,WHITE);
 1284              		.loc 1 493 9 is_stmt 1 view .LVU302
 1285 0024 04EB8404 		add	r4, r4, r4, lsl #2
 1286              	.LVL136:
 1287              		.loc 1 493 9 is_stmt 0 view .LVU303
 1288 0028 A400     		lsls	r4, r4, #2
 1289 002a A034     		adds	r4, r4, #160
 1290 002c A4B2     		uxth	r4, r4
 1291 002e 4FF6FF7A 		movw	r10, #65535
 1292 0032 CDF80CA0 		str	r10, [sp, #12]
 1293 0036 4FF47848 		mov	r8, #63488
 1294 003a CDF80880 		str	r8, [sp, #8]
 1295 003e 07AB     		add	r3, sp, #28
 1296 0040 0193     		str	r3, [sp, #4]
 1297 0042 1027     		movs	r7, #16
 1298 0044 0097     		str	r7, [sp]
 1299 0046 4FF4A073 		mov	r3, #320
 1300 004a F022     		movs	r2, #240
 1301 004c 2146     		mov	r1, r4
 1302 004e 2820     		movs	r0, #40
 1303 0050 FFF7FEFF 		bl	LCD_showString
 1304              	.LVL137:
 494:Src/touch.c   ****         sprintf(sbuf, "y%d:%d", i + 1, xy[i][1]);
 1305              		.loc 1 494 9 is_stmt 1 view .LVU304
 1306 0054 7388     		ldrh	r3, [r6, #2]
 1307 0056 2A46     		mov	r2, r5
 1308 0058 2A49     		ldr	r1, .L90+4
 1309 005a 07A8     		add	r0, sp, #28
 1310 005c FFF7FEFF 		bl	sprintf
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 34


 1311              	.LVL138:
 495:Src/touch.c   ****         LCD_showString(40 + 80, 160 + (i * 20), width, length, 16, sbuf, RED,WHITE);
 1312              		.loc 1 495 9 view .LVU305
 1313 0060 CDF80CA0 		str	r10, [sp, #12]
 1314 0064 CDF80880 		str	r8, [sp, #8]
 1315 0068 07AB     		add	r3, sp, #28
 1316 006a 0193     		str	r3, [sp, #4]
 1317 006c 0097     		str	r7, [sp]
 1318 006e 4FF4A073 		mov	r3, #320
 1319 0072 F022     		movs	r2, #240
 1320 0074 2146     		mov	r1, r4
 1321 0076 7820     		movs	r0, #120
 1322 0078 FFF7FEFF 		bl	LCD_showString
 1323              	.LVL139:
 490:Src/touch.c   ****     {
 1324              		.loc 1 490 25 discriminator 3 view .LVU306
 1325 007c ECB2     		uxtb	r4, r5
 1326              	.LVL140:
 1327              	.L87:
 490:Src/touch.c   ****     {
 1328              		.loc 1 490 19 discriminator 1 view .LVU307
 1329 007e 042C     		cmp	r4, #4
 1330 0080 C6D9     		bls	.L88
 496:Src/touch.c   ****     }
 497:Src/touch.c   **** 
 498:Src/touch.c   ****     /* 显示X/Y方向的比例因子 */
 499:Src/touch.c   ****     LCD_fill(40, 160 + (i * 20), width - 1, 16, WHITE);  /* 清除之前的px,py显示 */
 1331              		.loc 1 499 5 view .LVU308
 1332 0082 04EB8404 		add	r4, r4, r4, lsl #2
 1333              	.LVL141:
 1334              		.loc 1 499 5 is_stmt 0 view .LVU309
 1335 0086 A400     		lsls	r4, r4, #2
 1336 0088 A034     		adds	r4, r4, #160
 1337 008a A4B2     		uxth	r4, r4
 1338 008c 4FF6FF75 		movw	r5, #65535
 1339 0090 0095     		str	r5, [sp]
 1340 0092 1023     		movs	r3, #16
 1341 0094 EF22     		movs	r2, #239
 1342 0096 2146     		mov	r1, r4
 1343 0098 2820     		movs	r0, #40
 1344 009a FFF7FEFF 		bl	LCD_fill
 1345              	.LVL142:
 500:Src/touch.c   ****     sprintf(sbuf, "px:%0.2f", px);
 1346              		.loc 1 500 5 is_stmt 1 view .LVU310
 1347 009e DDE90423 		ldrd	r2, [sp, #16]
 1348 00a2 1949     		ldr	r1, .L90+8
 1349 00a4 07A8     		add	r0, sp, #28
 1350 00a6 FFF7FEFF 		bl	sprintf
 1351              	.LVL143:
 501:Src/touch.c   ****     sbuf[7] = 0; /* 添加结束符 */
 1352              		.loc 1 501 5 view .LVU311
 1353              		.loc 1 501 13 is_stmt 0 view .LVU312
 1354 00aa 4FF00008 		mov	r8, #0
 1355 00ae 8DF82380 		strb	r8, [sp, #35]
 502:Src/touch.c   ****     LCD_showString(40, 160 + (i * 20), width, length, 16, sbuf, RED,WHITE);
 1356              		.loc 1 502 5 is_stmt 1 view .LVU313
 1357 00b2 0395     		str	r5, [sp, #12]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 35


 1358 00b4 4FF47847 		mov	r7, #63488
 1359 00b8 0297     		str	r7, [sp, #8]
 1360 00ba 07AB     		add	r3, sp, #28
 1361 00bc 0193     		str	r3, [sp, #4]
 1362 00be 1026     		movs	r6, #16
 1363 00c0 0096     		str	r6, [sp]
 1364 00c2 4FF4A073 		mov	r3, #320
 1365 00c6 F022     		movs	r2, #240
 1366 00c8 2146     		mov	r1, r4
 1367 00ca 2820     		movs	r0, #40
 1368 00cc FFF7FEFF 		bl	LCD_showString
 1369              	.LVL144:
 503:Src/touch.c   ****     sprintf(sbuf, "py:%0.2f", py);
 1370              		.loc 1 503 5 view .LVU314
 1371 00d0 DDE91423 		ldrd	r2, [sp, #80]
 1372 00d4 0D49     		ldr	r1, .L90+12
 1373 00d6 07A8     		add	r0, sp, #28
 1374 00d8 FFF7FEFF 		bl	sprintf
 1375              	.LVL145:
 504:Src/touch.c   ****     sbuf[7] = 0; /* 添加结束符 */
 1376              		.loc 1 504 5 view .LVU315
 1377              		.loc 1 504 13 is_stmt 0 view .LVU316
 1378 00dc 8DF82380 		strb	r8, [sp, #35]
 505:Src/touch.c   ****     LCD_showString(40 + 80, 160 + (i * 20), width, length, 16, sbuf, RED,WHITE);
 1379              		.loc 1 505 5 is_stmt 1 view .LVU317
 1380 00e0 0395     		str	r5, [sp, #12]
 1381 00e2 0297     		str	r7, [sp, #8]
 1382 00e4 07AB     		add	r3, sp, #28
 1383 00e6 0193     		str	r3, [sp, #4]
 1384 00e8 0096     		str	r6, [sp]
 1385 00ea 4FF4A073 		mov	r3, #320
 1386 00ee F022     		movs	r2, #240
 1387 00f0 2146     		mov	r1, r4
 1388 00f2 7820     		movs	r0, #120
 1389 00f4 FFF7FEFF 		bl	LCD_showString
 1390              	.LVL146:
 506:Src/touch.c   **** }
 1391              		.loc 1 506 1 is_stmt 0 view .LVU318
 1392 00f8 0CB0     		add	sp, sp, #48
 1393              	.LCFI22:
 1394              		.cfi_def_cfa_offset 32
 1395              		@ sp needed
 1396 00fa BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1397              	.LVL147:
 1398              	.L91:
 1399              		.loc 1 506 1 view .LVU319
 1400 00fe 00BF     		.align	2
 1401              	.L90:
 1402 0100 00000000 		.word	.LC0
 1403 0104 08000000 		.word	.LC1
 1404 0108 10000000 		.word	.LC2
 1405 010c 1C000000 		.word	.LC3
 1406              		.cfi_endproc
 1407              	.LFE83:
 1409              		.section	.rodata.touchAdjust.str1.4,"aMS",%progbits,1
 1410              		.align	2
 1411              	.LC4:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 36


 1412 0000 506C6561 		.ascii	"Please use the stylus click the cross on the screen"
 1412      73652075 
 1412      73652074 
 1412      68652073 
 1412      74796C75 
 1413 0033 2E546865 		.ascii	".The cross will always move until the screen adjust"
 1413      2063726F 
 1413      73732077 
 1413      696C6C20 
 1413      616C7761 
 1414 0066 6D656E74 		.ascii	"ment is completed.\000"
 1414      20697320 
 1414      636F6D70 
 1414      6C657465 
 1414      642E00
 1415              		.global	__aeabi_ui2d
 1416              		.global	__aeabi_dsub
 1417              		.global	__aeabi_d2uiz
 1418              		.global	__aeabi_ddiv
 1419              		.global	__aeabi_dcmplt
 1420              		.global	__aeabi_dcmpgt
 1421              		.global	__aeabi_d2iz
 1422              		.global	__aeabi_dadd
 1423              		.global	__aeabi_d2f
 1424 0079 000000   		.align	2
 1425              	.LC5:
 1426 007c 546F7563 		.ascii	"Touch Screen Adjust OK!\000"
 1426      68205363 
 1426      7265656E 
 1426      2041646A 
 1426      75737420 
 1427              		.section	.text.touchAdjust,"ax",%progbits
 1428              		.align	1
 1429              		.global	touchAdjust
 1430              		.syntax unified
 1431              		.thumb
 1432              		.thumb_func
 1434              	touchAdjust:
 1435              	.LFB80:
 331:Src/touch.c   ****     double pxy[5][2];     /* 物理坐标缓存值 */
 1436              		.loc 1 331 1 is_stmt 1 view -0
 1437              		.cfi_startproc
 1438              		@ args = 0, pretend = 0, frame = 128
 1439              		@ frame_needed = 0, uses_anonymous_args = 0
 1440 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1441              	.LCFI23:
 1442              		.cfi_def_cfa_offset 32
 1443              		.cfi_offset 4, -32
 1444              		.cfi_offset 5, -28
 1445              		.cfi_offset 6, -24
 1446              		.cfi_offset 7, -20
 1447              		.cfi_offset 8, -16
 1448              		.cfi_offset 9, -12
 1449              		.cfi_offset 10, -8
 1450              		.cfi_offset 14, -4
 1451 0004 A4B0     		sub	sp, sp, #144
 1452              	.LCFI24:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 37


 1453              		.cfi_def_cfa_offset 176
 332:Src/touch.c   ****     uint8_t  cnt = 0;
 1454              		.loc 1 332 5 view .LVU321
 333:Src/touch.c   ****     double s1, s2, s3, s4;   /* 4个点的坐标差值 */
 1455              		.loc 1 333 5 view .LVU322
 1456              	.LVL148:
 334:Src/touch.c   ****     double px, py;          /* X,Y轴物理坐标比例,用于判定是否校准成功 */
 1457              		.loc 1 334 5 view .LVU323
 335:Src/touch.c   ****     uint16_t outtime = 0;
 1458              		.loc 1 335 5 view .LVU324
 336:Src/touch.c   ****     cnt = 0;
 1459              		.loc 1 336 5 view .LVU325
 337:Src/touch.c   **** 
 1460              		.loc 1 337 5 view .LVU326
 339:Src/touch.c   ****     LCD_showString(40, 40, 160, 100, 16, TP_REMIND_MSG_TBL, RED,WHITE); /* 显示提示信息 */
 1461              		.loc 1 339 5 view .LVU327
 1462 0006 4FF6FF70 		movw	r0, #65535
 1463 000a FFF7FEFF 		bl	LCD_clear
 1464              	.LVL149:
 340:Src/touch.c   ****     touch_drawPoint(20, 20, RED);   /* 画点1 */
 1465              		.loc 1 340 5 view .LVU328
 1466 000e 4FF6FF73 		movw	r3, #65535
 1467 0012 0393     		str	r3, [sp, #12]
 1468 0014 4FF47844 		mov	r4, #63488
 1469 0018 0294     		str	r4, [sp, #8]
 1470 001a 424B     		ldr	r3, .L116
 1471 001c 0193     		str	r3, [sp, #4]
 1472 001e 1023     		movs	r3, #16
 1473 0020 0093     		str	r3, [sp]
 1474 0022 6423     		movs	r3, #100
 1475 0024 A022     		movs	r2, #160
 1476 0026 2821     		movs	r1, #40
 1477 0028 0846     		mov	r0, r1
 1478 002a FFF7FEFF 		bl	LCD_showString
 1479              	.LVL150:
 341:Src/touch.c   ****     touch_dev.sta = 0;         /* 消除触发信号 */
 1480              		.loc 1 341 5 view .LVU329
 1481 002e 2246     		mov	r2, r4
 1482 0030 1421     		movs	r1, #20
 1483 0032 0846     		mov	r0, r1
 1484 0034 FFF7FEFF 		bl	touch_drawPoint
 1485              	.LVL151:
 342:Src/touch.c   **** 
 1486              		.loc 1 342 5 view .LVU330
 342:Src/touch.c   **** 
 1487              		.loc 1 342 19 is_stmt 0 view .LVU331
 1488 0038 0025     		movs	r5, #0
 1489 003a 3B4B     		ldr	r3, .L116+4
 1490 003c 9D86     		strh	r5, [r3, #52]	@ movhi
 336:Src/touch.c   ****     cnt = 0;
 1491              		.loc 1 336 14 view .LVU332
 1492 003e 2C46     		mov	r4, r5
 1493 0040 15E0     		b	.L93
 1494              	.LVL152:
 1495              	.L100:
 360:Src/touch.c   ****                     touch_drawPoint(width - 20, 20, RED);    /* 画点2 */
 1496              		.loc 1 360 21 is_stmt 1 view .LVU333
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 38


 1497 0042 4FF6FF72 		movw	r2, #65535
 1498 0046 1421     		movs	r1, #20
 1499 0048 0846     		mov	r0, r1
 1500 004a FFF7FEFF 		bl	touch_drawPoint
 1501              	.LVL153:
 361:Src/touch.c   ****                     break;
 1502              		.loc 1 361 21 view .LVU334
 1503 004e 4FF47842 		mov	r2, #63488
 1504 0052 1421     		movs	r1, #20
 1505 0054 DC20     		movs	r0, #220
 1506 0056 FFF7FEFF 		bl	touch_drawPoint
 1507              	.LVL154:
 362:Src/touch.c   **** 
 1508              		.loc 1 362 21 view .LVU335
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1509              		.loc 1 350 21 is_stmt 0 view .LVU336
 1510 005a 0024     		movs	r4, #0
 1511              	.LVL155:
 1512              	.L94:
 423:Src/touch.c   ****         outtime++;
 1513              		.loc 1 423 9 is_stmt 1 view .LVU337
 1514 005c 0A20     		movs	r0, #10
 1515 005e FFF7FEFF 		bl	delay_ms
 1516              	.LVL156:
 424:Src/touch.c   **** 
 1517              		.loc 1 424 9 view .LVU338
 424:Src/touch.c   **** 
 1518              		.loc 1 424 16 is_stmt 0 view .LVU339
 1519 0062 0134     		adds	r4, r4, #1
 1520              	.LVL157:
 424:Src/touch.c   **** 
 1521              		.loc 1 424 16 view .LVU340
 1522 0064 A4B2     		uxth	r4, r4
 1523              	.LVL158:
 426:Src/touch.c   ****         {
 1524              		.loc 1 426 9 is_stmt 1 view .LVU341
 426:Src/touch.c   ****         {
 1525              		.loc 1 426 12 is_stmt 0 view .LVU342
 1526 0066 B4F57A7F 		cmp	r4, #1000
 1527 006a 00F2D381 		bhi	.L113
 1528              	.LVL159:
 1529              	.L93:
 344:Src/touch.c   ****     {
 1530              		.loc 1 344 5 is_stmt 1 view .LVU343
 346:Src/touch.c   **** 
 1531              		.loc 1 346 9 view .LVU344
 346:Src/touch.c   **** 
 1532              		.loc 1 346 18 is_stmt 0 view .LVU345
 1533 006e 2E4E     		ldr	r6, .L116+4
 1534 0070 7368     		ldr	r3, [r6, #4]
 346:Src/touch.c   **** 
 1535              		.loc 1 346 9 view .LVU346
 1536 0072 0120     		movs	r0, #1
 1537 0074 9847     		blx	r3
 1538              	.LVL160:
 348:Src/touch.c   ****         {
 1539              		.loc 1 348 9 is_stmt 1 view .LVU347
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 39


 348:Src/touch.c   ****         {
 1540              		.loc 1 348 23 is_stmt 0 view .LVU348
 1541 0076 B38E     		ldrh	r3, [r6, #52]
 348:Src/touch.c   ****         {
 1542              		.loc 1 348 12 view .LVU349
 1543 0078 03F44042 		and	r2, r3, #49152
 1544 007c B2F5804F 		cmp	r2, #16384
 1545 0080 ECD1     		bne	.L94
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1546              		.loc 1 350 13 is_stmt 1 view .LVU350
 1547              	.LVL161:
 351:Src/touch.c   **** 
 1548              		.loc 1 351 13 view .LVU351
 351:Src/touch.c   **** 
 1549              		.loc 1 351 27 is_stmt 0 view .LVU352
 1550 0082 3446     		mov	r4, r6
 1551 0084 23F48043 		bic	r3, r3, #16384
 1552 0088 B386     		strh	r3, [r6, #52]	@ movhi
 353:Src/touch.c   ****             pxy[cnt][1] = touch_dev.y[0];      /* 保存Y物理坐标 */
 1553              		.loc 1 353 13 is_stmt 1 view .LVU353
 353:Src/touch.c   ****             pxy[cnt][1] = touch_dev.y[0];      /* 保存Y物理坐标 */
 1554              		.loc 1 353 25 is_stmt 0 view .LVU354
 1555 008a 24AB     		add	r3, sp, #144
 1556 008c 03EB0516 		add	r6, r3, r5, lsl #4
 1557 0090 A089     		ldrh	r0, [r4, #12]
 1558 0092 FFF7FEFF 		bl	__aeabi_ui2d
 1559              	.LVL162:
 1560 0096 46E91401 		strd	r0, [r6, #-80]
 354:Src/touch.c   ****             cnt++;
 1561              		.loc 1 354 13 is_stmt 1 view .LVU355
 354:Src/touch.c   ****             cnt++;
 1562              		.loc 1 354 25 is_stmt 0 view .LVU356
 1563 009a 208C     		ldrh	r0, [r4, #32]
 1564 009c FFF7FEFF 		bl	__aeabi_ui2d
 1565              	.LVL163:
 1566 00a0 46E91201 		strd	r0, [r6, #-72]
 355:Src/touch.c   **** 
 1567              		.loc 1 355 13 is_stmt 1 view .LVU357
 355:Src/touch.c   **** 
 1568              		.loc 1 355 16 is_stmt 0 view .LVU358
 1569 00a4 0135     		adds	r5, r5, #1
 1570              	.LVL164:
 355:Src/touch.c   **** 
 1571              		.loc 1 355 16 view .LVU359
 1572 00a6 EDB2     		uxtb	r5, r5
 1573              	.LVL165:
 357:Src/touch.c   ****             {
 1574              		.loc 1 357 13 is_stmt 1 view .LVU360
 1575 00a8 6B1E     		subs	r3, r5, #1
 1576 00aa 042B     		cmp	r3, #4
 1577 00ac 00F2B081 		bhi	.L109
 1578 00b0 01A2     		adr	r2, .L96
 1579 00b2 52F823F0 		ldr	pc, [r2, r3, lsl #2]
 1580 00b6 00BF     		.p2align 2
 1581              	.L96:
 1582 00b8 43000000 		.word	.L100+1
 1583 00bc CD000000 		.word	.L99+1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 40


 1584 00c0 EB000000 		.word	.L98+1
 1585 00c4 0B010000 		.word	.L97+1
 1586 00c8 2D010000 		.word	.L95+1
 1587              		.p2align 1
 1588              	.L99:
 365:Src/touch.c   ****                     touch_drawPoint(20, length - 20, RED);   /* 画点3 */
 1589              		.loc 1 365 21 view .LVU361
 1590 00cc 4FF6FF72 		movw	r2, #65535
 1591 00d0 1421     		movs	r1, #20
 1592 00d2 DC20     		movs	r0, #220
 1593 00d4 FFF7FEFF 		bl	touch_drawPoint
 1594              	.LVL166:
 366:Src/touch.c   ****                     break;
 1595              		.loc 1 366 21 view .LVU362
 1596 00d8 4FF47842 		mov	r2, #63488
 1597 00dc 4FF49671 		mov	r1, #300
 1598 00e0 1420     		movs	r0, #20
 1599 00e2 FFF7FEFF 		bl	touch_drawPoint
 1600              	.LVL167:
 367:Src/touch.c   **** 
 1601              		.loc 1 367 21 view .LVU363
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1602              		.loc 1 350 21 is_stmt 0 view .LVU364
 1603 00e6 0024     		movs	r4, #0
 367:Src/touch.c   **** 
 1604              		.loc 1 367 21 view .LVU365
 1605 00e8 B8E7     		b	.L94
 1606              	.L98:
 370:Src/touch.c   ****                     touch_drawPoint(width - 20, length - 20, RED);    /* 画点4 */
 1607              		.loc 1 370 21 is_stmt 1 view .LVU366
 1608 00ea 4FF6FF72 		movw	r2, #65535
 1609 00ee 4FF49671 		mov	r1, #300
 1610 00f2 1420     		movs	r0, #20
 1611 00f4 FFF7FEFF 		bl	touch_drawPoint
 1612              	.LVL168:
 371:Src/touch.c   ****                     break;
 1613              		.loc 1 371 21 view .LVU367
 1614 00f8 4FF47842 		mov	r2, #63488
 1615 00fc 4FF49671 		mov	r1, #300
 1616 0100 DC20     		movs	r0, #220
 1617 0102 FFF7FEFF 		bl	touch_drawPoint
 1618              	.LVL169:
 372:Src/touch.c   **** 
 1619              		.loc 1 372 21 view .LVU368
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1620              		.loc 1 350 21 is_stmt 0 view .LVU369
 1621 0106 0024     		movs	r4, #0
 372:Src/touch.c   **** 
 1622              		.loc 1 372 21 view .LVU370
 1623 0108 A8E7     		b	.L94
 1624              	.L97:
 375:Src/touch.c   ****                     touch_drawPoint(width / 2, length / 2, RED);  /* 画点5 */
 1625              		.loc 1 375 21 is_stmt 1 view .LVU371
 1626 010a 4FF6FF70 		movw	r0, #65535
 1627 010e FFF7FEFF 		bl	LCD_clear
 1628              	.LVL170:
 376:Src/touch.c   ****                     break;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 41


 1629              		.loc 1 376 21 view .LVU372
 1630 0112 4FF47842 		mov	r2, #63488
 1631 0116 A021     		movs	r1, #160
 1632 0118 7820     		movs	r0, #120
 1633 011a FFF7FEFF 		bl	touch_drawPoint
 1634              	.LVL171:
 377:Src/touch.c   **** 
 1635              		.loc 1 377 21 view .LVU373
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1636              		.loc 1 350 21 is_stmt 0 view .LVU374
 1637 011e 0024     		movs	r4, #0
 377:Src/touch.c   **** 
 1638              		.loc 1 377 21 view .LVU375
 1639 0120 9CE7     		b	.L94
 1640              	.L117:
 1641 0122 00BF     		.align	2
 1642              	.L116:
 1643 0124 00000000 		.word	.LC4
 1644 0128 00000000 		.word	touch_dev
 1645              	.L95:
 380:Src/touch.c   ****                     s3 = pxy[3][0] - pxy[2][0]; /* 第4个点和第3个点的X轴物理坐标差值(AD值) */
 1646              		.loc 1 380 21 is_stmt 1 view .LVU376
 380:Src/touch.c   ****                     s3 = pxy[3][0] - pxy[2][0]; /* 第4个点和第3个点的X轴物理坐标差值(AD值) */
 1647              		.loc 1 380 24 is_stmt 0 view .LVU377
 1648 012c DDE91023 		ldrd	r2, [sp, #64]
 1649 0130 DDE91401 		ldrd	r0, [sp, #80]
 1650 0134 FFF7FEFF 		bl	__aeabi_dsub
 1651              	.LVL172:
 1652 0138 8046     		mov	r8, r0
 1653 013a 8946     		mov	r9, r1
 1654              	.LVL173:
 381:Src/touch.c   ****                     s2 = pxy[3][1] - pxy[1][1]; /* 第4个点和第2个点的Y轴物理坐标差值(AD值) */
 1655              		.loc 1 381 21 is_stmt 1 view .LVU378
 381:Src/touch.c   ****                     s2 = pxy[3][1] - pxy[1][1]; /* 第4个点和第2个点的Y轴物理坐标差值(AD值) */
 1656              		.loc 1 381 24 is_stmt 0 view .LVU379
 1657 013c DDE91823 		ldrd	r2, [sp, #96]
 1658 0140 DDE91C01 		ldrd	r0, [sp, #112]
 1659 0144 FFF7FEFF 		bl	__aeabi_dsub
 1660              	.LVL174:
 1661 0148 0646     		mov	r6, r0
 1662 014a 0F46     		mov	r7, r1
 1663              	.LVL175:
 382:Src/touch.c   ****                     s4 = pxy[2][1] - pxy[0][1]; /* 第3个点和第1个点的Y轴物理坐标差值(AD值) */
 1664              		.loc 1 382 21 is_stmt 1 view .LVU380
 382:Src/touch.c   ****                     s4 = pxy[2][1] - pxy[0][1]; /* 第3个点和第1个点的Y轴物理坐标差值(AD值) */
 1665              		.loc 1 382 24 is_stmt 0 view .LVU381
 1666 014c DDE91623 		ldrd	r2, [sp, #88]
 1667 0150 DDE91E01 		ldrd	r0, [sp, #120]
 1668 0154 FFF7FEFF 		bl	__aeabi_dsub
 1669              	.LVL176:
 1670 0158 CDE90401 		strd	r0, [sp, #16]
 1671              	.LVL177:
 383:Src/touch.c   ****                     LCD_showNum(160,0,s1,5,16,RED,WHITE);
 1672              		.loc 1 383 21 is_stmt 1 view .LVU382
 383:Src/touch.c   ****                     LCD_showNum(160,0,s1,5,16,RED,WHITE);
 1673              		.loc 1 383 24 is_stmt 0 view .LVU383
 1674 015c DDE91223 		ldrd	r2, [sp, #72]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 42


 1675 0160 DDE91A01 		ldrd	r0, [sp, #104]
 1676              	.LVL178:
 383:Src/touch.c   ****                     LCD_showNum(160,0,s1,5,16,RED,WHITE);
 1677              		.loc 1 383 24 view .LVU384
 1678 0164 FFF7FEFF 		bl	__aeabi_dsub
 1679              	.LVL179:
 1680 0168 0446     		mov	r4, r0
 1681 016a 0D46     		mov	r5, r1
 1682              	.LVL180:
 383:Src/touch.c   ****                     LCD_showNum(160,0,s1,5,16,RED,WHITE);
 1683              		.loc 1 383 24 view .LVU385
 1684 016c CDE90E45 		strd	r4, [sp, #56]
 1685              	.LVL181:
 384:Src/touch.c   ****                     LCD_showNum(160,17,s2,5,16,RED,WHITE);
 1686              		.loc 1 384 21 is_stmt 1 view .LVU386
 1687 0170 CDE90689 		strd	r8, [sp, #24]
 1688 0174 4046     		mov	r0, r8
 1689 0176 4946     		mov	r1, r9
 1690 0178 FFF7FEFF 		bl	__aeabi_d2uiz
 1691              	.LVL182:
 1692 017c 0246     		mov	r2, r0
 1693 017e 4FF6FF7A 		movw	r10, #65535
 1694 0182 CDF808A0 		str	r10, [sp, #8]
 1695 0186 4FF47849 		mov	r9, #63488
 1696 018a CDF80490 		str	r9, [sp, #4]
 1697 018e 4FF01008 		mov	r8, #16
 1698              	.LVL183:
 384:Src/touch.c   ****                     LCD_showNum(160,17,s2,5,16,RED,WHITE);
 1699              		.loc 1 384 21 is_stmt 0 view .LVU387
 1700 0192 CDF80080 		str	r8, [sp]
 1701 0196 0523     		movs	r3, #5
 1702 0198 0021     		movs	r1, #0
 1703 019a A020     		movs	r0, #160
 1704 019c FFF7FEFF 		bl	LCD_showNum
 1705              	.LVL184:
 385:Src/touch.c   ****                     LCD_showNum(160,34,s3,5,16,RED,WHITE);
 1706              		.loc 1 385 21 is_stmt 1 view .LVU388
 1707 01a0 DDE90401 		ldrd	r0, [sp, #16]
 1708 01a4 FFF7FEFF 		bl	__aeabi_d2uiz
 1709              	.LVL185:
 1710 01a8 0246     		mov	r2, r0
 1711 01aa CDF808A0 		str	r10, [sp, #8]
 1712 01ae CDF80490 		str	r9, [sp, #4]
 1713 01b2 CDF80080 		str	r8, [sp]
 1714 01b6 0523     		movs	r3, #5
 1715 01b8 1121     		movs	r1, #17
 1716 01ba A020     		movs	r0, #160
 1717 01bc FFF7FEFF 		bl	LCD_showNum
 1718              	.LVL186:
 386:Src/touch.c   ****                     LCD_showNum(160,52,s4,5,16,RED,WHITE);
 1719              		.loc 1 386 21 view .LVU389
 1720 01c0 CDE90867 		strd	r6, [sp, #32]
 1721 01c4 3046     		mov	r0, r6
 1722 01c6 3946     		mov	r1, r7
 1723 01c8 FFF7FEFF 		bl	__aeabi_d2uiz
 1724              	.LVL187:
 1725 01cc 0246     		mov	r2, r0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 43


 1726 01ce CDF808A0 		str	r10, [sp, #8]
 1727 01d2 CDF80490 		str	r9, [sp, #4]
 1728 01d6 CDF80080 		str	r8, [sp]
 1729 01da 0523     		movs	r3, #5
 1730 01dc 2221     		movs	r1, #34
 1731 01de A020     		movs	r0, #160
 1732 01e0 FFF7FEFF 		bl	LCD_showNum
 1733              	.LVL188:
 387:Src/touch.c   ****                     px = (double)s1 / s3;       /* X轴比例因子 */
 1734              		.loc 1 387 21 view .LVU390
 1735 01e4 2646     		mov	r6, r4
 1736              	.LVL189:
 387:Src/touch.c   ****                     px = (double)s1 / s3;       /* X轴比例因子 */
 1737              		.loc 1 387 21 is_stmt 0 view .LVU391
 1738 01e6 2F46     		mov	r7, r5
 1739 01e8 2046     		mov	r0, r4
 1740 01ea 2946     		mov	r1, r5
 1741 01ec FFF7FEFF 		bl	__aeabi_d2uiz
 1742              	.LVL190:
 1743 01f0 0246     		mov	r2, r0
 1744 01f2 CDF808A0 		str	r10, [sp, #8]
 1745 01f6 CDF80490 		str	r9, [sp, #4]
 1746 01fa CDF80080 		str	r8, [sp]
 1747 01fe 0523     		movs	r3, #5
 1748 0200 3421     		movs	r1, #52
 1749 0202 A020     		movs	r0, #160
 1750 0204 FFF7FEFF 		bl	LCD_showNum
 1751              	.LVL191:
 388:Src/touch.c   ****                     py = (double)s2 / s4;       /* Y轴比例因子 */
 1752              		.loc 1 388 21 is_stmt 1 view .LVU392
 388:Src/touch.c   ****                     py = (double)s2 / s4;       /* Y轴比例因子 */
 1753              		.loc 1 388 24 is_stmt 0 view .LVU393
 1754 0208 DDE90823 		ldrd	r2, [sp, #32]
 1755 020c DDE90601 		ldrd	r0, [sp, #24]
 1756 0210 FFF7FEFF 		bl	__aeabi_ddiv
 1757              	.LVL192:
 1758 0214 0446     		mov	r4, r0
 1759              	.LVL193:
 388:Src/touch.c   ****                     py = (double)s2 / s4;       /* Y轴比例因子 */
 1760              		.loc 1 388 24 view .LVU394
 1761 0216 0D46     		mov	r5, r1
 1762              	.LVL194:
 389:Src/touch.c   ****                     LCD_showNum(160,100,(double)px,5,16,RED,WHITE);
 1763              		.loc 1 389 21 is_stmt 1 view .LVU395
 389:Src/touch.c   ****                     LCD_showNum(160,100,(double)px,5,16,RED,WHITE);
 1764              		.loc 1 389 24 is_stmt 0 view .LVU396
 1765 0218 3246     		mov	r2, r6
 1766 021a 3B46     		mov	r3, r7
 1767 021c DDE90401 		ldrd	r0, [sp, #16]
 1768 0220 FFF7FEFF 		bl	__aeabi_ddiv
 1769              	.LVL195:
 1770 0224 0646     		mov	r6, r0
 1771 0226 0F46     		mov	r7, r1
 1772              	.LVL196:
 390:Src/touch.c   ****                     LCD_showNum(160,120,py,5,16,RED,WHITE);
 1773              		.loc 1 390 21 is_stmt 1 view .LVU397
 1774 0228 2046     		mov	r0, r4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 44


 1775 022a 2946     		mov	r1, r5
 1776 022c FFF7FEFF 		bl	__aeabi_d2uiz
 1777              	.LVL197:
 1778 0230 0246     		mov	r2, r0
 1779 0232 CDF808A0 		str	r10, [sp, #8]
 1780 0236 CDF80490 		str	r9, [sp, #4]
 1781 023a CDF80080 		str	r8, [sp]
 1782 023e 0523     		movs	r3, #5
 1783 0240 6421     		movs	r1, #100
 1784 0242 A020     		movs	r0, #160
 1785 0244 FFF7FEFF 		bl	LCD_showNum
 1786              	.LVL198:
 391:Src/touch.c   ****                     if (px < 0)px = -px;        /* 负数改正数 */
 1787              		.loc 1 391 21 view .LVU398
 1788 0248 3046     		mov	r0, r6
 1789 024a 3946     		mov	r1, r7
 1790 024c FFF7FEFF 		bl	__aeabi_d2uiz
 1791              	.LVL199:
 1792 0250 0246     		mov	r2, r0
 1793 0252 CDF808A0 		str	r10, [sp, #8]
 1794 0256 CDF80490 		str	r9, [sp, #4]
 1795 025a CDF80080 		str	r8, [sp]
 1796 025e 0523     		movs	r3, #5
 1797 0260 7821     		movs	r1, #120
 1798 0262 A020     		movs	r0, #160
 1799 0264 FFF7FEFF 		bl	LCD_showNum
 1800              	.LVL200:
 392:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 1801              		.loc 1 392 21 view .LVU399
 392:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 1802              		.loc 1 392 24 is_stmt 0 view .LVU400
 1803 0268 0022     		movs	r2, #0
 1804 026a 0023     		movs	r3, #0
 1805 026c 2046     		mov	r0, r4
 1806 026e 2946     		mov	r1, r5
 1807 0270 FFF7FEFF 		bl	__aeabi_dcmplt
 1808              	.LVL201:
 1809 0274 0028     		cmp	r0, #0
 1810 0276 7AD1     		bne	.L114
 1811              	.L101:
 393:Src/touch.c   **** 
 1812              		.loc 1 393 21 is_stmt 1 view .LVU401
 393:Src/touch.c   **** 
 1813              		.loc 1 393 24 is_stmt 0 view .LVU402
 1814 0278 0022     		movs	r2, #0
 1815 027a 0023     		movs	r3, #0
 1816 027c 3046     		mov	r0, r6
 1817 027e 3946     		mov	r1, r7
 1818 0280 FFF7FEFF 		bl	__aeabi_dcmplt
 1819              	.LVL202:
 1820 0284 0028     		cmp	r0, #0
 1821 0286 79D1     		bne	.L115
 1822              	.L103:
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1823              		.loc 1 395 21 is_stmt 1 view .LVU403
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1824              		.loc 1 395 24 is_stmt 0 view .LVU404
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 45


 1825 0288 65A3     		adr	r3, .L118
 1826 028a D3E90023 		ldrd	r2, [r3]
 1827 028e 2046     		mov	r0, r4
 1828 0290 2946     		mov	r1, r5
 1829 0292 FFF7FEFF 		bl	__aeabi_dcmplt
 1830              	.LVL203:
 1831 0296 0028     		cmp	r0, #0
 1832 0298 53D1     		bne	.L105
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1833              		.loc 1 395 35 discriminator 2 view .LVU405
 1834 029a 63A3     		adr	r3, .L118+8
 1835 029c D3E90023 		ldrd	r2, [r3]
 1836 02a0 2046     		mov	r0, r4
 1837 02a2 2946     		mov	r1, r5
 1838 02a4 FFF7FEFF 		bl	__aeabi_dcmpgt
 1839              	.LVL204:
 1840 02a8 0028     		cmp	r0, #0
 1841 02aa 4AD1     		bne	.L105
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1842              		.loc 1 395 48 discriminator 4 view .LVU406
 1843 02ac 5CA3     		adr	r3, .L118
 1844 02ae D3E90023 		ldrd	r2, [r3]
 1845 02b2 3046     		mov	r0, r6
 1846 02b4 3946     		mov	r1, r7
 1847 02b6 FFF7FEFF 		bl	__aeabi_dcmplt
 1848              	.LVL205:
 1849 02ba 0028     		cmp	r0, #0
 1850 02bc 41D1     		bne	.L105
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1851              		.loc 1 395 61 discriminator 6 view .LVU407
 1852 02be 5AA3     		adr	r3, .L118+8
 1853 02c0 D3E90023 		ldrd	r2, [r3]
 1854 02c4 3046     		mov	r0, r6
 1855 02c6 3946     		mov	r1, r7
 1856 02c8 FFF7FEFF 		bl	__aeabi_dcmpgt
 1857              	.LVL206:
 1858 02cc 0028     		cmp	r0, #0
 1859 02ce 38D1     		bne	.L105
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1860              		.loc 1 396 29 view .LVU408
 1861 02d0 DDE90601 		ldrd	r0, [sp, #24]
 1862 02d4 FFF7FEFF 		bl	__aeabi_d2iz
 1863              	.LVL207:
 1864 02d8 8046     		mov	r8, r0
 1865 02da 80EAE073 		eor	r3, r0, r0, asr #31
 1866 02de A3EBE073 		sub	r3, r3, r0, asr #31
 395:Src/touch.c   ****                             abs(s1) > 4095 || abs(s2) > 4095 || abs(s3) > 4095 || abs(s4) > 4095 ||
 1867              		.loc 1 395 74 discriminator 8 view .LVU409
 1868 02e2 B3F5805F 		cmp	r3, #4096
 1869 02e6 2CDA     		bge	.L105
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1870              		.loc 1 396 47 view .LVU410
 1871 02e8 DDE90401 		ldrd	r0, [sp, #16]
 1872 02ec FFF7FEFF 		bl	__aeabi_d2iz
 1873              	.LVL208:
 1874 02f0 8146     		mov	r9, r0
 1875 02f2 80EAE073 		eor	r3, r0, r0, asr #31
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 46


 1876 02f6 A3EBE073 		sub	r3, r3, r0, asr #31
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1877              		.loc 1 396 44 view .LVU411
 1878 02fa B3F5805F 		cmp	r3, #4096
 1879 02fe 20DA     		bge	.L105
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1880              		.loc 1 396 65 discriminator 1 view .LVU412
 1881 0300 DDE90801 		ldrd	r0, [sp, #32]
 1882 0304 FFF7FEFF 		bl	__aeabi_d2iz
 1883              	.LVL209:
 1884 0308 8246     		mov	r10, r0
 1885 030a 80EAE073 		eor	r3, r0, r0, asr #31
 1886 030e A3EBE073 		sub	r3, r3, r0, asr #31
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1887              		.loc 1 396 62 discriminator 1 view .LVU413
 1888 0312 B3F5805F 		cmp	r3, #4096
 1889 0316 14DA     		bge	.L105
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1890              		.loc 1 396 83 discriminator 2 view .LVU414
 1891 0318 DDE90E01 		ldrd	r0, [sp, #56]
 1892 031c FFF7FEFF 		bl	__aeabi_d2iz
 1893              	.LVL210:
 1894 0320 80EAE073 		eor	r3, r0, r0, asr #31
 1895 0324 A3EBE073 		sub	r3, r3, r0, asr #31
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1896              		.loc 1 396 80 discriminator 2 view .LVU415
 1897 0328 B3F5805F 		cmp	r3, #4096
 1898 032c 09DA     		bge	.L105
 396:Src/touch.c   ****                             abs(s1) == 0 || abs(s2) == 0 || abs(s3) == 0 || abs(s4) == 0           
 1899              		.loc 1 396 98 discriminator 3 view .LVU416
 1900 032e B8F1000F 		cmp	r8, #0
 1901 0332 06D0     		beq	.L105
 397:Src/touch.c   ****                        )
 1902              		.loc 1 397 42 view .LVU417
 1903 0334 B9F1000F 		cmp	r9, #0
 1904 0338 03D0     		beq	.L105
 397:Src/touch.c   ****                        )
 1905              		.loc 1 397 58 discriminator 1 view .LVU418
 1906 033a BAF1000F 		cmp	r10, #0
 1907 033e 00D0     		beq	.L105
 397:Src/touch.c   ****                        )
 1908              		.loc 1 397 74 discriminator 2 view .LVU419
 1909 0340 18BB     		cbnz	r0, .L106
 1910              	.L105:
 400:Src/touch.c   ****                         touch_drawPoint(width / 2, length / 2, WHITE); /* 清除点5 */
 1911              		.loc 1 400 25 is_stmt 1 view .LVU420
 1912              	.LVL211:
 401:Src/touch.c   ****                         touch_drawPoint(20, 20, RED);   /* 重新画点1 */
 1913              		.loc 1 401 25 view .LVU421
 1914 0342 4FF6FF72 		movw	r2, #65535
 1915 0346 A021     		movs	r1, #160
 1916 0348 7820     		movs	r0, #120
 1917 034a FFF7FEFF 		bl	touch_drawPoint
 1918              	.LVL212:
 402:Src/touch.c   ****                         touch_adjustInfoShow(pxy, px, py);   /* 显示当前信息,方便找问题 */
 1919              		.loc 1 402 25 view .LVU422
 1920 034e 4FF47842 		mov	r2, #63488
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 47


 1921 0352 1421     		movs	r1, #20
 1922 0354 0846     		mov	r0, r1
 1923 0356 FFF7FEFF 		bl	touch_drawPoint
 1924              	.LVL213:
 403:Src/touch.c   ****                         continue;
 1925              		.loc 1 403 25 view .LVU423
 1926 035a CDE90067 		strd	r6, [sp]
 1927 035e 2246     		mov	r2, r4
 1928 0360 2B46     		mov	r3, r5
 1929 0362 10A8     		add	r0, sp, #64
 1930 0364 FFF7FEFF 		bl	touch_adjustInfoShow
 1931              	.LVL214:
 404:Src/touch.c   ****                     }
 1932              		.loc 1 404 25 view .LVU424
 350:Src/touch.c   ****             touch_dev.sta &= ~TP_CATH_PRES;    /* 标记按键已经被处理过了. */
 1933              		.loc 1 350 21 is_stmt 0 view .LVU425
 1934 0368 0024     		movs	r4, #0
 1935              	.LVL215:
 400:Src/touch.c   ****                         touch_drawPoint(width / 2, length / 2, WHITE); /* 清除点5 */
 1936              		.loc 1 400 29 view .LVU426
 1937 036a 2546     		mov	r5, r4
 404:Src/touch.c   ****                     }
 1938              		.loc 1 404 25 view .LVU427
 1939 036c 7FE6     		b	.L93
 1940              	.LVL216:
 1941              	.L114:
 392:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 1942              		.loc 1 392 32 is_stmt 1 discriminator 1 view .LVU428
 392:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 1943              		.loc 1 392 35 is_stmt 0 discriminator 1 view .LVU429
 1944 036e 0A94     		str	r4, [sp, #40]
 1945 0370 05F10043 		add	r3, r5, #-2147483648
 1946 0374 0B93     		str	r3, [sp, #44]
 1947 0376 DDE90A45 		ldrd	r4, [sp, #40]
 1948              	.LVL217:
 392:Src/touch.c   ****                     if (py < 0)py = -py;        /* 负数改正数 */
 1949              		.loc 1 392 35 discriminator 1 view .LVU430
 1950 037a 7DE7     		b	.L101
 1951              	.L115:
 393:Src/touch.c   **** 
 1952              		.loc 1 393 32 is_stmt 1 discriminator 1 view .LVU431
 393:Src/touch.c   **** 
 1953              		.loc 1 393 35 is_stmt 0 discriminator 1 view .LVU432
 1954 037c 0C96     		str	r6, [sp, #48]
 1955 037e 07F10043 		add	r3, r7, #-2147483648
 1956 0382 0D93     		str	r3, [sp, #52]
 1957 0384 DDE90C67 		ldrd	r6, [sp, #48]
 1958              	.LVL218:
 393:Src/touch.c   **** 
 1959              		.loc 1 393 35 discriminator 1 view .LVU433
 1960 0388 7EE7     		b	.L103
 1961              	.L106:
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1962              		.loc 1 407 21 is_stmt 1 view .LVU434
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1963              		.loc 1 407 49 is_stmt 0 view .LVU435
 1964 038a DDE90823 		ldrd	r2, [sp, #32]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 48


 1965 038e DDE90601 		ldrd	r0, [sp, #24]
 1966 0392 FFF7FEFF 		bl	__aeabi_dadd
 1967              	.LVL219:
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1968              		.loc 1 407 38 view .LVU436
 1969 0396 FFF7FEFF 		bl	__aeabi_d2f
 1970              	.LVL220:
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1971              		.loc 1 407 55 view .LVU437
 1972 039a 2549     		ldr	r1, .L118+16
 1973 039c FFF7FEFF 		bl	__aeabi_fdiv
 1974              	.LVL221:
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1975              		.loc 1 407 36 view .LVU438
 1976 03a0 244C     		ldr	r4, .L118+20
 1977              	.LVL222:
 407:Src/touch.c   ****                     touch_dev.yfac = (float)(s2 + s4) / (2 * (length - 40));
 1978              		.loc 1 407 36 view .LVU439
 1979 03a2 A063     		str	r0, [r4, #56]	@ float
 408:Src/touch.c   **** 
 1980              		.loc 1 408 21 is_stmt 1 view .LVU440
 408:Src/touch.c   **** 
 1981              		.loc 1 408 49 is_stmt 0 view .LVU441
 1982 03a4 DDE90E23 		ldrd	r2, [sp, #56]
 1983 03a8 DDE90401 		ldrd	r0, [sp, #16]
 1984 03ac FFF7FEFF 		bl	__aeabi_dadd
 1985              	.LVL223:
 408:Src/touch.c   **** 
 1986              		.loc 1 408 38 view .LVU442
 1987 03b0 FFF7FEFF 		bl	__aeabi_d2f
 1988              	.LVL224:
 408:Src/touch.c   **** 
 1989              		.loc 1 408 55 view .LVU443
 1990 03b4 2049     		ldr	r1, .L118+24
 1991 03b6 FFF7FEFF 		bl	__aeabi_fdiv
 1992              	.LVL225:
 408:Src/touch.c   **** 
 1993              		.loc 1 408 36 view .LVU444
 1994 03ba E063     		str	r0, [r4, #60]	@ float
 410:Src/touch.c   ****                     touch_dev.yc = pxy[4][1];      /* Y轴,物理中心坐标 */
 1995              		.loc 1 410 21 is_stmt 1 view .LVU445
 410:Src/touch.c   ****                     touch_dev.yc = pxy[4][1];      /* Y轴,物理中心坐标 */
 1996              		.loc 1 410 34 is_stmt 0 view .LVU446
 1997 03bc DDE92001 		ldrd	r0, [sp, #128]
 1998 03c0 FFF7FEFF 		bl	__aeabi_d2iz
 1999              	.LVL226:
 2000 03c4 A4F84000 		strh	r0, [r4, #64]	@ movhi
 411:Src/touch.c   **** 
 2001              		.loc 1 411 21 is_stmt 1 view .LVU447
 411:Src/touch.c   **** 
 2002              		.loc 1 411 34 is_stmt 0 view .LVU448
 2003 03c8 DDE92201 		ldrd	r0, [sp, #136]
 2004 03cc FFF7FEFF 		bl	__aeabi_d2iz
 2005              	.LVL227:
 2006 03d0 A4F84200 		strh	r0, [r4, #66]	@ movhi
 413:Src/touch.c   ****                     LCD_showString(35, 110, width, length, 16, "Touch Screen Adjust OK!", BLUE,WHIT
 2007              		.loc 1 413 21 is_stmt 1 view .LVU449
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 49


 2008 03d4 4FF6FF70 		movw	r0, #65535
 2009 03d8 FFF7FEFF 		bl	LCD_clear
 2010              	.LVL228:
 414:Src/touch.c   ****                     delay_ms(1000);
 2011              		.loc 1 414 21 view .LVU450
 2012 03dc 4FF6FF74 		movw	r4, #65535
 2013 03e0 0394     		str	r4, [sp, #12]
 2014 03e2 1F23     		movs	r3, #31
 2015 03e4 0293     		str	r3, [sp, #8]
 2016 03e6 154B     		ldr	r3, .L118+28
 2017 03e8 0193     		str	r3, [sp, #4]
 2018 03ea 1023     		movs	r3, #16
 2019 03ec 0093     		str	r3, [sp]
 2020 03ee 4FF4A073 		mov	r3, #320
 2021 03f2 F022     		movs	r2, #240
 2022 03f4 6E21     		movs	r1, #110
 2023 03f6 2320     		movs	r0, #35
 2024 03f8 FFF7FEFF 		bl	LCD_showString
 2025              	.LVL229:
 415:Src/touch.c   ****                     touch_saveAdjustData();
 2026              		.loc 1 415 21 view .LVU451
 2027 03fc 4FF47A70 		mov	r0, #1000
 2028 0400 FFF7FEFF 		bl	delay_ms
 2029              	.LVL230:
 416:Src/touch.c   **** 
 2030              		.loc 1 416 21 view .LVU452
 2031 0404 FFF7FEFF 		bl	touch_saveAdjustData
 2032              	.LVL231:
 418:Src/touch.c   ****                     return;/* 校正完成 */
 2033              		.loc 1 418 21 view .LVU453
 2034 0408 2046     		mov	r0, r4
 2035 040a FFF7FEFF 		bl	LCD_clear
 2036              	.LVL232:
 419:Src/touch.c   ****             }
 2037              		.loc 1 419 21 view .LVU454
 2038 040e 03E0     		b	.L92
 2039              	.LVL233:
 2040              	.L109:
 357:Src/touch.c   ****             {
 2041              		.loc 1 357 13 is_stmt 0 view .LVU455
 2042 0410 0024     		movs	r4, #0
 2043 0412 23E6     		b	.L94
 2044              	.LVL234:
 2045              	.L113:
 428:Src/touch.c   ****             break;
 2046              		.loc 1 428 13 is_stmt 1 view .LVU456
 2047 0414 FFF7FEFF 		bl	touch_getAdjustData
 2048              	.LVL235:
 429:Src/touch.c   ****         }
 2049              		.loc 1 429 13 view .LVU457
 2050              	.L92:
 432:Src/touch.c   **** 
 2051              		.loc 1 432 1 is_stmt 0 view .LVU458
 2052 0418 24B0     		add	sp, sp, #144
 2053              	.LCFI25:
 2054              		.cfi_def_cfa_offset 32
 2055              		@ sp needed
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 50


 2056 041a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2057              	.L119:
 2058 041e 00BF     		.align	3
 2059              	.L118:
 2060 0420 66666666 		.word	1717986918
 2061 0424 6666EE3F 		.word	1072588390
 2062 0428 CDCCCCCC 		.word	-858993459
 2063 042c CCCCF03F 		.word	1072745676
 2064 0430 0000C843 		.word	1137180672
 2065 0434 00000000 		.word	touch_dev
 2066 0438 00000C44 		.word	1141637120
 2067 043c 7C000000 		.word	.LC5
 2068              		.cfi_endproc
 2069              	.LFE80:
 2071              		.section	.text.touchInit,"ax",%progbits
 2072              		.align	1
 2073              		.global	touchInit
 2074              		.syntax unified
 2075              		.thumb
 2076              		.thumb_func
 2078              	touchInit:
 2079              	.LFB71:
  61:Src/touch.c   ****     touch_dev.touchtype = 0;                   /* 默认设置(电阻屏 & 竖屏) */
 2080              		.loc 1 61 1 is_stmt 1 view -0
 2081              		.cfi_startproc
 2082              		@ args = 0, pretend = 0, frame = 24
 2083              		@ frame_needed = 0, uses_anonymous_args = 0
 2084 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2085              	.LCFI26:
 2086              		.cfi_def_cfa_offset 24
 2087              		.cfi_offset 4, -24
 2088              		.cfi_offset 5, -20
 2089              		.cfi_offset 6, -16
 2090              		.cfi_offset 7, -12
 2091              		.cfi_offset 8, -8
 2092              		.cfi_offset 14, -4
 2093 0004 86B0     		sub	sp, sp, #24
 2094              	.LCFI27:
 2095              		.cfi_def_cfa_offset 48
  62:Src/touch.c   ****     touch_dev.touchtype |= 0 & 0x01;  /* 根据LCD判定是横屏还是竖屏 */
 2096              		.loc 1 62 5 view .LVU460
  62:Src/touch.c   ****     touch_dev.touchtype |= 0 & 0x01;  /* 根据LCD判定是横屏还是竖屏 */
 2097              		.loc 1 62 25 is_stmt 0 view .LVU461
 2098 0006 304C     		ldr	r4, .L125
 2099 0008 0021     		movs	r1, #0
 2100 000a 84F84410 		strb	r1, [r4, #68]
  63:Src/touch.c   **** 
 2101              		.loc 1 63 5 is_stmt 1 view .LVU462
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2102              		.loc 1 65 5 view .LVU463
 2103              	.LBB11:
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2104              		.loc 1 65 5 view .LVU464
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2105              		.loc 1 65 5 view .LVU465
 2106 000e 2F4B     		ldr	r3, .L125+4
 2107 0010 9A69     		ldr	r2, [r3, #24]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 51


 2108 0012 42F00802 		orr	r2, r2, #8
 2109 0016 9A61     		str	r2, [r3, #24]
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2110              		.loc 1 65 5 view .LVU466
 2111 0018 9A69     		ldr	r2, [r3, #24]
 2112 001a 02F00802 		and	r2, r2, #8
 2113 001e 0092     		str	r2, [sp]
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2114              		.loc 1 65 5 view .LVU467
 2115 0020 009A     		ldr	r2, [sp]
 2116              	.LBE11:
  65:Src/touch.c   ****     __HAL_RCC_GPIOF_CLK_ENABLE();
 2117              		.loc 1 65 5 view .LVU468
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2118              		.loc 1 66 5 view .LVU469
 2119              	.LBB12:
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2120              		.loc 1 66 5 view .LVU470
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2121              		.loc 1 66 5 view .LVU471
 2122 0022 9A69     		ldr	r2, [r3, #24]
 2123 0024 42F08002 		orr	r2, r2, #128
 2124 0028 9A61     		str	r2, [r3, #24]
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2125              		.loc 1 66 5 view .LVU472
 2126 002a 9B69     		ldr	r3, [r3, #24]
 2127 002c 03F08003 		and	r3, r3, #128
 2128 0030 0193     		str	r3, [sp, #4]
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2129              		.loc 1 66 5 view .LVU473
 2130 0032 019B     		ldr	r3, [sp, #4]
 2131              	.LBE12:
  66:Src/touch.c   ****     GPIO_InitTypeDef GPIO_InitStruct;
 2132              		.loc 1 66 5 view .LVU474
  67:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_PEN_PIN;
 2133              		.loc 1 67 5 view .LVU475
  68:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 2134              		.loc 1 68 5 view .LVU476
  68:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_INPUT;
 2135              		.loc 1 68 25 is_stmt 0 view .LVU477
 2136 0034 4FF48063 		mov	r3, #1024
 2137 0038 0293     		str	r3, [sp, #8]
  69:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 2138              		.loc 1 69 5 is_stmt 1 view .LVU478
  69:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 2139              		.loc 1 69 26 is_stmt 0 view .LVU479
 2140 003a 0391     		str	r1, [sp, #12]
  70:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 2141              		.loc 1 70 5 is_stmt 1 view .LVU480
  70:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 2142              		.loc 1 70 26 is_stmt 0 view .LVU481
 2143 003c 0126     		movs	r6, #1
 2144 003e 0496     		str	r6, [sp, #16]
  71:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_PEN_PORT,&GPIO_InitStruct);
 2145              		.loc 1 71 5 is_stmt 1 view .LVU482
  71:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_PEN_PORT,&GPIO_InitStruct);
 2146              		.loc 1 71 27 is_stmt 0 view .LVU483
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 52


 2147 0040 4FF00308 		mov	r8, #3
 2148 0044 CDF81480 		str	r8, [sp, #20]
  72:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_MISO_PIN;
 2149              		.loc 1 72 5 is_stmt 1 view .LVU484
 2150 0048 214D     		ldr	r5, .L125+8
 2151 004a 02A9     		add	r1, sp, #8
 2152 004c 2846     		mov	r0, r5
 2153 004e FFF7FEFF 		bl	HAL_GPIO_Init
 2154              	.LVL236:
  73:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MISO_PORT,&GPIO_InitStruct);
 2155              		.loc 1 73 5 view .LVU485
  73:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MISO_PORT,&GPIO_InitStruct);
 2156              		.loc 1 73 25 is_stmt 0 view .LVU486
 2157 0052 0423     		movs	r3, #4
 2158 0054 0293     		str	r3, [sp, #8]
  74:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_MOSI_PIN;
 2159              		.loc 1 74 5 is_stmt 1 view .LVU487
 2160 0056 1F4F     		ldr	r7, .L125+12
 2161 0058 02A9     		add	r1, sp, #8
 2162 005a 3846     		mov	r0, r7
 2163 005c FFF7FEFF 		bl	HAL_GPIO_Init
 2164              	.LVL237:
  75:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 2165              		.loc 1 75 5 view .LVU488
  75:Src/touch.c   ****     GPIO_InitStruct.Mode = GPIO_MODE_OUTPUT_PP;
 2166              		.loc 1 75 25 is_stmt 0 view .LVU489
 2167 0060 4FF40073 		mov	r3, #512
 2168 0064 0293     		str	r3, [sp, #8]
  76:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 2169              		.loc 1 76 5 is_stmt 1 view .LVU490
  76:Src/touch.c   ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 2170              		.loc 1 76 26 is_stmt 0 view .LVU491
 2171 0066 0396     		str	r6, [sp, #12]
  77:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 2172              		.loc 1 77 5 is_stmt 1 view .LVU492
  77:Src/touch.c   ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_HIGH;
 2173              		.loc 1 77 26 is_stmt 0 view .LVU493
 2174 0068 0496     		str	r6, [sp, #16]
  78:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MOSI_PORT,&GPIO_InitStruct);
 2175              		.loc 1 78 5 is_stmt 1 view .LVU494
  78:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_MOSI_PORT,&GPIO_InitStruct);
 2176              		.loc 1 78 27 is_stmt 0 view .LVU495
 2177 006a CDF81480 		str	r8, [sp, #20]
  79:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_SCK_PIN;
 2178              		.loc 1 79 5 is_stmt 1 view .LVU496
 2179 006e 02A9     		add	r1, sp, #8
 2180 0070 2846     		mov	r0, r5
 2181 0072 FFF7FEFF 		bl	HAL_GPIO_Init
 2182              	.LVL238:
  80:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_SCK_PORT,&GPIO_InitStruct);
 2183              		.loc 1 80 5 view .LVU497
  80:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_SCK_PORT,&GPIO_InitStruct);
 2184              		.loc 1 80 25 is_stmt 0 view .LVU498
 2185 0076 0223     		movs	r3, #2
 2186 0078 0293     		str	r3, [sp, #8]
  81:Src/touch.c   ****     GPIO_InitStruct.Pin = TOUCH_CS_PIN;
 2187              		.loc 1 81 5 is_stmt 1 view .LVU499
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 53


 2188 007a 02A9     		add	r1, sp, #8
 2189 007c 3846     		mov	r0, r7
 2190 007e FFF7FEFF 		bl	HAL_GPIO_Init
 2191              	.LVL239:
  82:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_CS_PORT,&GPIO_InitStruct);
 2192              		.loc 1 82 5 view .LVU500
  82:Src/touch.c   ****     HAL_GPIO_Init(TOUCH_CS_PORT,&GPIO_InitStruct);
 2193              		.loc 1 82 25 is_stmt 0 view .LVU501
 2194 0082 4FF40063 		mov	r3, #2048
 2195 0086 0293     		str	r3, [sp, #8]
  83:Src/touch.c   ****     touch_readXY(&touch_dev.x[0],&touch_dev.y[0]);
 2196              		.loc 1 83 5 is_stmt 1 view .LVU502
 2197 0088 02A9     		add	r1, sp, #8
 2198 008a 2846     		mov	r0, r5
 2199 008c FFF7FEFF 		bl	HAL_GPIO_Init
 2200              	.LVL240:
  84:Src/touch.c   ****     AT24C02_Init();
 2201              		.loc 1 84 5 view .LVU503
 2202 0090 04F12001 		add	r1, r4, #32
 2203 0094 04F10C00 		add	r0, r4, #12
 2204 0098 FFF7FEFF 		bl	touch_readXY
 2205              	.LVL241:
  85:Src/touch.c   ****     if(touch_getAdjustData())
 2206              		.loc 1 85 5 view .LVU504
 2207 009c FFF7FEFF 		bl	AT24C02_Init
 2208              	.LVL242:
  86:Src/touch.c   ****     {
 2209              		.loc 1 86 5 view .LVU505
  86:Src/touch.c   ****     {
 2210              		.loc 1 86 8 is_stmt 0 view .LVU506
 2211 00a0 FFF7FEFF 		bl	touch_getAdjustData
 2212              	.LVL243:
  86:Src/touch.c   ****     {
 2213              		.loc 1 86 7 discriminator 1 view .LVU507
 2214 00a4 18B1     		cbz	r0, .L124
  88:Src/touch.c   ****     }
 2215              		.loc 1 88 16 view .LVU508
 2216 00a6 0020     		movs	r0, #0
 2217              	.L121:
  98:Src/touch.c   **** 
 2218              		.loc 1 98 1 view .LVU509
 2219 00a8 06B0     		add	sp, sp, #24
 2220              	.LCFI28:
 2221              		.cfi_remember_state
 2222              		.cfi_def_cfa_offset 24
 2223              		@ sp needed
 2224 00aa BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2225              	.L124:
 2226              	.LCFI29:
 2227              		.cfi_restore_state
  92:Src/touch.c   ****         touchAdjust();
 2228              		.loc 1 92 9 is_stmt 1 view .LVU510
 2229 00ae 4FF6FF70 		movw	r0, #65535
 2230 00b2 FFF7FEFF 		bl	LCD_clear
 2231              	.LVL244:
  93:Src/touch.c   ****         touch_saveAdjustData();
 2232              		.loc 1 93 9 view .LVU511
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 54


 2233 00b6 FFF7FEFF 		bl	touchAdjust
 2234              	.LVL245:
  94:Src/touch.c   ****     }
 2235              		.loc 1 94 9 view .LVU512
 2236 00ba FFF7FEFF 		bl	touch_saveAdjustData
 2237              	.LVL246:
  96:Src/touch.c   ****     return 1;
 2238              		.loc 1 96 5 view .LVU513
 2239 00be FFF7FEFF 		bl	touch_getAdjustData
 2240              	.LVL247:
  97:Src/touch.c   **** }
 2241              		.loc 1 97 5 view .LVU514
  97:Src/touch.c   **** }
 2242              		.loc 1 97 12 is_stmt 0 view .LVU515
 2243 00c2 3046     		mov	r0, r6
 2244 00c4 F0E7     		b	.L121
 2245              	.L126:
 2246 00c6 00BF     		.align	2
 2247              	.L125:
 2248 00c8 00000000 		.word	touch_dev
 2249 00cc 00100240 		.word	1073876992
 2250 00d0 001C0140 		.word	1073814528
 2251 00d4 000C0140 		.word	1073810432
 2252              		.cfi_endproc
 2253              	.LFE71:
 2255              		.global	TP_REMIND_MSG_TBL
 2256              		.section	.rodata.TP_REMIND_MSG_TBL,"a"
 2257              		.align	2
 2260              	TP_REMIND_MSG_TBL:
 2261 0000 00000000 		.word	.LC4
 2262              		.global	touch_dev
 2263              		.section	.data.touch_dev,"aw"
 2264              		.align	2
 2267              	touch_dev:
 2268 0000 00000000 		.word	touchInit
 2269 0004 00000000 		.word	touchScan
 2270 0008 00000000 		.word	touchAdjust
 2271 000c 0000     		.short	0
 2272 000e 0000     		.short	0
 2273 0010 0000     		.short	0
 2274 0012 0000     		.short	0
 2275 0014 0000     		.short	0
 2276 0016 0000     		.short	0
 2277 0018 0000     		.short	0
 2278 001a 0000     		.short	0
 2279 001c 00000000 		.space	4
 2280 0020 00000000 		.space	40
 2280      00000000 
 2280      00000000 
 2280      00000000 
 2280      00000000 
 2281              		.text
 2282              	.Letext0:
 2283              		.file 2 "D:/toolchain/gcc/xpack-arm-none-eabi-gcc-13.2.1-1.1-win32-x64/xpack-arm-none-eabi-gcc-13.
 2284              		.file 3 "D:/toolchain/gcc/xpack-arm-none-eabi-gcc-13.2.1-1.1-win32-x64/xpack-arm-none-eabi-gcc-13.
 2285              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xe.h"
 2286              		.file 5 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 55


 2287              		.file 6 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 2288              		.file 7 "Inc/touch.h"
 2289              		.file 8 "D:/toolchain/gcc/xpack-arm-none-eabi-gcc-13.2.1-1.1-win32-x64/xpack-arm-none-eabi-gcc-13.
 2290              		.file 9 "Inc/AT24C02.h"
 2291              		.file 10 "Inc/lcd.h"
 2292              		.file 11 "Inc/delay.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 56


DEFINED SYMBOLS
                            *ABS*:00000000 touch.c
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:19     .text.TOUCH_SCK:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:25     .text.TOUCH_SCK:00000000 TOUCH_SCK
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:67     .text.TOUCH_SCK:0000001c $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:72     .text.TOUCH_MOSI:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:78     .text.TOUCH_MOSI:00000000 TOUCH_MOSI
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:120    .text.TOUCH_MOSI:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:125    .text.TOUCH_CS:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:131    .text.TOUCH_CS:00000000 TOUCH_CS
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:173    .text.TOUCH_CS:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:178    .text.touch_writeByte:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:184    .text.touch_writeByte:00000000 touch_writeByte
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:262    .text.touch_readADC:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:268    .text.touch_readADC:00000000 touch_readADC
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:409    .text.touch_readADC:00000084 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:414    .text.touch_readXOY:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:420    .text.touch_readXOY:00000000 touch_readXOY
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:594    .text.touch_readXOY:00000094 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:599    .text.touch_readXY:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:605    .text.touch_readXY:00000000 touch_readXY
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:645    .text.touch_readXY2:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:651    .text.touch_readXY2:00000000 touch_readXY2
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:780    .text.touchScan:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:786    .text.touchScan:00000000 touchScan
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:946    .text.touchScan:000000bc $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2267   .data.touch_dev:00000000 touch_dev
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:955    .text.touch_drawPoint:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:961    .text.touch_drawPoint:00000000 touch_drawPoint
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1058   .text.touch_drawBigPoint:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1064   .text.touch_drawBigPoint:00000000 touch_drawBigPoint
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1120   .text.touch_saveAdjustData:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1126   .text.touch_saveAdjustData:00000000 touch_saveAdjustData
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1157   .text.touch_saveAdjustData:00000018 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1162   .text.touch_getAdjustData:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1168   .text.touch_getAdjustData:00000000 touch_getAdjustData
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1215   .text.touch_getAdjustData:00000020 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1220   .rodata.touch_adjustInfoShow.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1233   .text.touch_adjustInfoShow:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1239   .text.touch_adjustInfoShow:00000000 touch_adjustInfoShow
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1402   .text.touch_adjustInfoShow:00000100 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1410   .rodata.touchAdjust.str1.4:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1428   .text.touchAdjust:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1434   .text.touchAdjust:00000000 touchAdjust
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1582   .text.touchAdjust:000000b8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1587   .text.touchAdjust:000000cc $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1643   .text.touchAdjust:00000124 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:1648   .text.touchAdjust:0000012c $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2060   .text.touchAdjust:00000420 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2072   .text.touchInit:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2078   .text.touchInit:00000000 touchInit
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2248   .text.touchInit:000000c8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2260   .rodata.TP_REMIND_MSG_TBL:00000000 TP_REMIND_MSG_TBL
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2257   .rodata.TP_REMIND_MSG_TBL:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s:2264   .data.touch_dev:00000000 $d

UNDEFINED SYMBOLS
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cchNeWKD.s 			page 57


HAL_GPIO_WritePin
delay_us
HAL_GPIO_ReadPin
__aeabi_i2f
__aeabi_fdiv
__aeabi_fadd
__aeabi_f2uiz
LCD_drawLine
LCD_drawPoint
LCD_drawCircle
AT24C02_write
AT24C02_writeByte
AT24C02_read
AT24C02_receiveByte
sprintf
LCD_showString
LCD_fill
__aeabi_ui2d
__aeabi_dsub
__aeabi_d2uiz
__aeabi_ddiv
__aeabi_dcmplt
__aeabi_dcmpgt
__aeabi_d2iz
__aeabi_dadd
__aeabi_d2f
LCD_clear
delay_ms
LCD_showNum
HAL_GPIO_Init
AT24C02_Init
