ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"delay.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "Src/delay.c"
  18              		.section	.text.delay_init,"ax",%progbits
  19              		.align	1
  20              		.global	delay_init
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	delay_init:
  26              	.LVL0:
  27              	.LFB65:
   1:Src/delay.c   **** /**
   2:Src/delay.c   ****  **************************************************************************************************
   3:Src/delay.c   ****  * @file        delay.c
   4:Src/delay.c   ****  * @author      ÕýµãÔ­×ÓÍÅ¶Ó(ALIENTEK)
   5:Src/delay.c   ****  * @version     V1.1
   6:Src/delay.c   ****  * @date        2023-02-25
   7:Src/delay.c   ****  * @brief       Ê¹ÓÃSysTickµÄÆÕÍ¨¼ÆÊýÄ£Ê½¶ÔÑÓ³Ù½øÐÐ¹ÜÀí(Ö§³Öucosii)
   8:Src/delay.c   ****  *              Ìá¹©delay_init³õÊ¼»¯º¯Êý£¬ delay_usºÍdelay_msµÈÑÓÊ±º¯Êý
   9:Src/delay.c   ****  * @license     Copyright (c) 2022-2032, ¹ãÖÝÊÐÐÇÒíµç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾
  10:Src/delay.c   ****  **************************************************************************************************
  11:Src/delay.c   ****  * @attention
  12:Src/delay.c   ****  *
  13:Src/delay.c   ****  * ÊµÑéÆ½Ì¨:ÕýµãÔ­×Ó STM32F103¿ª·¢°å
  14:Src/delay.c   ****  * ÔÚÏßÊÓÆµ:www.yuanzige.com
  15:Src/delay.c   ****  * ¼¼ÊõÂÛÌ³:www.openedv.com
  16:Src/delay.c   ****  * ¹«Ë¾ÍøÖ·:www.alientek.com
  17:Src/delay.c   ****  * ¹ºÂòµØÖ·:openedv.taobao.com
  18:Src/delay.c   ****  *
  19:Src/delay.c   ****  * ÐÞ¸ÄËµÃ÷
  20:Src/delay.c   ****  * V1.0 20230206
  21:Src/delay.c   ****  * µÚÒ»´Î·¢²¼
  22:Src/delay.c   ****  * V1.1 20230225
  23:Src/delay.c   ****  * ÐÞ¸ÄSYS_SUPPORT_OS²¿·Ö´úÂë, Ä¬ÈÏ½öÖ§³ÖUCOSII 2.93.01°æ±¾, ÆäËûOSÇë²Î¿¼ÊµÏÖ
  24:Src/delay.c   ****  * ÐÞ¸Ädelay_init²»ÔÙÊ¹ÓÃ8·ÖÆµ,È«²¿Í³Ò»Ê¹ÓÃMCUÊ±ÖÓ
  25:Src/delay.c   ****  * ÐÞ¸Ädelay_usÊ¹ÓÃÊ±ÖÓÕªÈ¡·¨ÑÓÊ±, ¼æÈÝOS
  26:Src/delay.c   ****  * ÐÞ¸Ädelay_msÖ±½ÓÊ¹ÓÃdelay_usÑÓÊ±ÊµÏÖ.
  27:Src/delay.c   ****  *
  28:Src/delay.c   ****  **************************************************************************************************
  29:Src/delay.c   ****  */
  30:Src/delay.c   **** 
  31:Src/delay.c   **** #include "sys.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 2


  32:Src/delay.c   **** #include "delay.h"
  33:Src/delay.c   **** 
  34:Src/delay.c   **** 
  35:Src/delay.c   **** static uint32_t g_fac_us = 0;       /* usÑÓÊ±±¶³ËÊý */
  36:Src/delay.c   **** 
  37:Src/delay.c   **** /* Èç¹ûSYS_SUPPORT_OS¶¨ÒåÁË,ËµÃ÷ÒªÖ§³ÖOSÁË(²»ÏÞÓÚUCOS) */
  38:Src/delay.c   **** #if SYS_SUPPORT_OS
  39:Src/delay.c   **** 
  40:Src/delay.c   **** /* Ìí¼Ó¹«¹²Í·ÎÄ¼þ ( ucosÐèÒªÓÃµ½) */
  41:Src/delay.c   **** #include "os.h"
  42:Src/delay.c   **** 
  43:Src/delay.c   **** /* ¶¨Òåg_fac_ms±äÁ¿, ±íÊ¾msÑÓÊ±µÄ±¶³ËÊý, ´ú±íÃ¿¸ö½ÚÅÄµÄmsÊý, (½öÔÚÊ¹ÄÜosµÄÊ±ºò,ÐèÒªÓÃµ½) */
  44:Src/delay.c   **** static uint16_t g_fac_ms = 0;
  45:Src/delay.c   **** 
  46:Src/delay.c   **** /*
  47:Src/delay.c   ****  *  µ±delay_us/delay_msÐèÒªÖ§³ÖOSµÄÊ±ºòÐèÒªÈý¸öÓëOSÏà¹ØµÄºê¶¨ÒåºÍº¯ÊýÀ´Ö§³Ö
  48:Src/delay.c   ****  *  Ê×ÏÈÊÇ3¸öºê¶¨Òå:
  49:Src/delay.c   ****  *      delay_osrunning    :ÓÃÓÚ±íÊ¾OSµ±Ç°ÊÇ·ñÕýÔÚÔËÐÐ,ÒÔ¾ö¶¨ÊÇ·ñ¿ÉÒÔÊ¹ÓÃÏà¹Øº¯Êý
  50:Src/delay.c   ****  *      delay_ostickspersec:ÓÃÓÚ±íÊ¾OSÉè¶¨µÄÊ±ÖÓ½ÚÅÄ,delay_init½«¸ù¾ÝÕâ¸ö²ÎÊýÀ´³õÊ¼»¯systick
  51:Src/delay.c   ****  *      delay_osintnesting :ÓÃÓÚ±íÊ¾OSÖÐ¶ÏÇ¶Ì×¼¶±ð,ÒòÎªÖÐ¶ÏÀïÃæ²»¿ÉÒÔµ÷¶È,delay_msÊ¹ÓÃ¸Ã²ÎÊýÀ´¾ö¶¨È
  52:Src/delay.c   ****  *  È»ºóÊÇ3¸öº¯Êý:
  53:Src/delay.c   ****  *      delay_osschedlock  :ÓÃÓÚËø¶¨OSÈÎÎñµ÷¶È,½ûÖ¹µ÷¶È
  54:Src/delay.c   ****  *      delay_osschedunlock:ÓÃÓÚ½âËøOSÈÎÎñµ÷¶È,ÖØÐÂ¿ªÆôµ÷¶È
  55:Src/delay.c   ****  *      delay_ostimedly    :ÓÃÓÚOSÑÓÊ±,¿ÉÒÔÒýÆðÈÎÎñµ÷¶È.
  56:Src/delay.c   ****  *
  57:Src/delay.c   ****  *  ±¾Àý³Ì½ö×÷UCOSIIµÄÖ§³Ö,ÆäËûOS,Çë×ÔÐÐ²Î¿¼×ÅÒÆÖ²
  58:Src/delay.c   ****  */
  59:Src/delay.c   **** 
  60:Src/delay.c   **** /* Ö§³ÖUCOSII */
  61:Src/delay.c   **** #define delay_osrunning     OSRunning           /* OSÊÇ·ñÔËÐÐ±ê¼Ç,0,²»ÔËÐÐ;1,ÔÚÔËÐÐ */
  62:Src/delay.c   **** #define delay_ostickspersec OS_TICKS_PER_SEC    /* OSÊ±ÖÓ½ÚÅÄ,¼´Ã¿Ãëµ÷¶È´ÎÊý */
  63:Src/delay.c   **** #define delay_osintnesting  OSIntNesting        /* ÖÐ¶ÏÇ¶Ì×¼¶±ð,¼´ÖÐ¶ÏÇ¶Ì×´ÎÊý */
  64:Src/delay.c   **** 
  65:Src/delay.c   **** 
  66:Src/delay.c   **** /**
  67:Src/delay.c   ****  * @brief     us¼¶ÑÓÊ±Ê±,¹Ø±ÕÈÎÎñµ÷¶È(·ÀÖ¹´ò¶Ïus¼¶ÑÓ³Ù)
  68:Src/delay.c   ****  * @param     ÎÞ
  69:Src/delay.c   ****  * @retval    ÎÞ
  70:Src/delay.c   ****  */
  71:Src/delay.c   **** void delay_osschedlock(void)
  72:Src/delay.c   **** {
  73:Src/delay.c   ****     OSSchedLock();                      /* UCOSIIµÄ·½Ê½,½ûÖ¹µ÷¶È£¬·ÀÖ¹´ò¶ÏusÑÓÊ± */
  74:Src/delay.c   **** }
  75:Src/delay.c   **** 
  76:Src/delay.c   **** /**
  77:Src/delay.c   ****  * @brief     us¼¶ÑÓÊ±Ê±,»Ö¸´ÈÎÎñµ÷¶È
  78:Src/delay.c   ****  * @param     ÎÞ
  79:Src/delay.c   ****  * @retval    ÎÞ
  80:Src/delay.c   ****  */
  81:Src/delay.c   **** void delay_osschedunlock(void)
  82:Src/delay.c   **** {
  83:Src/delay.c   ****     OSSchedUnlock();                    /* UCOSIIµÄ·½Ê½,»Ö¸´µ÷¶È */
  84:Src/delay.c   **** }
  85:Src/delay.c   **** 
  86:Src/delay.c   **** /**
  87:Src/delay.c   ****  * @brief     us¼¶ÑÓÊ±Ê±,»Ö¸´ÈÎÎñµ÷¶È
  88:Src/delay.c   ****  * @param     ticks: ÑÓÊ±µÄ½ÚÅÄÊý
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 3


  89:Src/delay.c   ****  * @retval    ÎÞ
  90:Src/delay.c   ****  */
  91:Src/delay.c   **** void delay_ostimedly(uint32_t ticks)
  92:Src/delay.c   **** {
  93:Src/delay.c   ****     OSTimeDly(ticks);                               /* UCOSIIÑÓÊ± */
  94:Src/delay.c   **** }
  95:Src/delay.c   **** 
  96:Src/delay.c   **** /**
  97:Src/delay.c   ****  * @brief     systickÖÐ¶Ï·þÎñº¯Êý,Ê¹ÓÃOSÊ±ÓÃµ½
  98:Src/delay.c   ****  * @param     ticks : ÑÓÊ±µÄ½ÚÅÄÊý  
  99:Src/delay.c   ****  * @retval    ÎÞ
 100:Src/delay.c   ****  */  
 101:Src/delay.c   **** void SysTick_Handler(void)
 102:Src/delay.c   **** {
 103:Src/delay.c   ****     /* OS ¿ªÊ¼ÅÜÁË,²ÅÖ´ÐÐÕý³£µÄµ÷¶È´¦Àí */
 104:Src/delay.c   ****     if (delay_osrunning == OS_TRUE)
 105:Src/delay.c   ****     {
 106:Src/delay.c   ****         /* µ÷ÓÃ uC/OS-II µÄ SysTick ÖÐ¶Ï·þÎñº¯Êý */
 107:Src/delay.c   ****         OS_CPU_SysTickHandler();
 108:Src/delay.c   ****     }
 109:Src/delay.c   ****     HAL_IncTick();
 110:Src/delay.c   **** }
 111:Src/delay.c   **** #endif
 112:Src/delay.c   **** 
 113:Src/delay.c   **** /**
 114:Src/delay.c   ****  * @brief     ³õÊ¼»¯ÑÓ³Ùº¯Êý
 115:Src/delay.c   ****  * @param     sysclk: ÏµÍ³Ê±ÖÓÆµÂÊ, ¼´CPUÆµÂÊ(rcc_c_ck), 72MHz
 116:Src/delay.c   ****  * @retval    ÎÞ
 117:Src/delay.c   ****  */  
 118:Src/delay.c   **** void delay_init(uint16_t sysclk)
 119:Src/delay.c   **** {
  28              		.loc 1 119 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 120:Src/delay.c   **** #if SYS_SUPPORT_OS                                      /* Èç¹ûÐèÒªÖ§³ÖOS */
 121:Src/delay.c   ****     uint32_t reload;
 122:Src/delay.c   **** #endif
 123:Src/delay.c   ****     g_fac_us = sysclk;                                  /* ÓÉÓÚÔÚHAL_InitÖÐÒÑ¶Ôsystick×öÁËÅäÖÃ£¬ËùÒ
  33              		.loc 1 123 5 view .LVU1
  34              		.loc 1 123 14 is_stmt 0 view .LVU2
  35 0000 014B     		ldr	r3, .L2
  36 0002 1860     		str	r0, [r3]
 124:Src/delay.c   **** #if SYS_SUPPORT_OS                                      /* Èç¹ûÐèÒªÖ§³ÖOS. */
 125:Src/delay.c   ****     reload = sysclk;                                    /* Ã¿ÃëÖÓµÄ¼ÆÊý´ÎÊý µ¥Î»ÎªM */
 126:Src/delay.c   ****     reload *= 1000000 / delay_ostickspersec;            /* ¸ù¾Ýdelay_ostickspersecÉè¶¨Òç³öÊ±¼ä,relo
 127:Src/delay.c   ****                                                          * ¼Ä´æÆ÷,×î´óÖµ:16777216,ÔÚ72MÏÂ,Ô¼ºÏ0.233
 128:Src/delay.c   ****                                                          */
 129:Src/delay.c   ****     g_fac_ms = 1000 / delay_ostickspersec;              /* ´ú±íOS¿ÉÒÔÑÓÊ±µÄ×îÉÙµ¥Î» */
 130:Src/delay.c   ****     SysTick->CTRL |= 1 << 1;                            /* ¿ªÆôSYSTICKÖÐ¶Ï */
 131:Src/delay.c   ****     SysTick->LOAD = reload;                             /* Ã¿1/delay_ostickspersecÃëÖÐ¶ÏÒ»´Î */
 132:Src/delay.c   ****     SysTick->CTRL |= 1 << 0;                            /* ¿ªÆôSYSTICK */
 133:Src/delay.c   **** #endif 
 134:Src/delay.c   **** }
  37              		.loc 1 134 1 view .LVU3
  38 0004 7047     		bx	lr
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 4


  39              	.L3:
  40 0006 00BF     		.align	2
  41              	.L2:
  42 0008 00000000 		.word	g_fac_us
  43              		.cfi_endproc
  44              	.LFE65:
  46              		.section	.text.delay_us,"ax",%progbits
  47              		.align	1
  48              		.global	delay_us
  49              		.syntax unified
  50              		.thumb
  51              		.thumb_func
  53              	delay_us:
  54              	.LVL1:
  55              	.LFB66:
 135:Src/delay.c   **** 
 136:Src/delay.c   **** /**
 137:Src/delay.c   ****  * @brief     ÑÓÊ±nus
 138:Src/delay.c   ****  * @note      ÎÞÂÛÊÇ·ñÊ¹ÓÃOS, ¶¼ÊÇÓÃÊ±ÖÓÕªÈ¡·¨À´×öusÑÓÊ±
 139:Src/delay.c   ****  * @param     nus: ÒªÑÓÊ±µÄusÊý
 140:Src/delay.c   ****  * @note      nusÈ¡Öµ·¶Î§: 0 ~ (2^32 / fac_us) (fac_usÒ»°ãµÈÓÚÏµÍ³Ö÷Æµ, ×ÔÐÐÌ×Èë¼ÆËã)
 141:Src/delay.c   ****  * @retval    ÎÞ
 142:Src/delay.c   ****  */
 143:Src/delay.c   **** void delay_us(uint32_t nus)
 144:Src/delay.c   **** {
  56              		.loc 1 144 1 is_stmt 1 view -0
  57              		.cfi_startproc
  58              		@ args = 0, pretend = 0, frame = 0
  59              		@ frame_needed = 0, uses_anonymous_args = 0
  60              		@ link register save eliminated.
  61              		.loc 1 144 1 is_stmt 0 view .LVU5
  62 0000 10B4     		push	{r4}
  63              	.LCFI0:
  64              		.cfi_def_cfa_offset 4
  65              		.cfi_offset 4, -4
 145:Src/delay.c   ****     uint32_t ticks;
  66              		.loc 1 145 5 is_stmt 1 view .LVU6
 146:Src/delay.c   ****     uint32_t told, tnow, tcnt = 0;
  67              		.loc 1 146 5 view .LVU7
  68              	.LVL2:
 147:Src/delay.c   ****     uint32_t reload = SysTick->LOAD;        /* LOADµÄÖµ */
  69              		.loc 1 147 5 view .LVU8
  70              		.loc 1 147 14 is_stmt 0 view .LVU9
  71 0002 4FF0E022 		mov	r2, #-536813568
  72 0006 5469     		ldr	r4, [r2, #20]
  73              	.LVL3:
 148:Src/delay.c   ****     ticks = nus * g_fac_us;                 /* ÐèÒªµÄ½ÚÅÄÊý */
  74              		.loc 1 148 5 is_stmt 1 view .LVU10
  75              		.loc 1 148 17 is_stmt 0 view .LVU11
  76 0008 0B4B     		ldr	r3, .L11
  77 000a 1B68     		ldr	r3, [r3]
  78              		.loc 1 148 11 view .LVU12
  79 000c 00FB03FC 		mul	ip, r0, r3
  80              	.LVL4:
 149:Src/delay.c   ****     
 150:Src/delay.c   **** #if SYS_SUPPORT_OS                          /* Èç¹ûÐèÒªÖ§³ÖOS */
 151:Src/delay.c   ****     delay_osschedlock();                    /* Ëø¶¨ OS µÄÈÎÎñµ÷¶ÈÆ÷ */
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 5


 152:Src/delay.c   **** #endif
 153:Src/delay.c   **** 
 154:Src/delay.c   ****     told = SysTick->VAL;                    /* ¸Õ½øÈëÊ±µÄ¼ÆÊýÆ÷Öµ */
  81              		.loc 1 154 5 is_stmt 1 view .LVU13
  82              		.loc 1 154 10 is_stmt 0 view .LVU14
  83 0010 9369     		ldr	r3, [r2, #24]
  84              	.LVL5:
 146:Src/delay.c   ****     uint32_t reload = SysTick->LOAD;        /* LOADµÄÖµ */
  85              		.loc 1 146 26 view .LVU15
  86 0012 0021     		movs	r1, #0
  87 0014 04E0     		b	.L8
  88              	.LVL6:
  89              	.L6:
 155:Src/delay.c   ****     while (1)
 156:Src/delay.c   ****     {
 157:Src/delay.c   ****         tnow = SysTick->VAL;
 158:Src/delay.c   ****         if (tnow != told)
 159:Src/delay.c   ****         {
 160:Src/delay.c   ****             if (tnow < told)
 161:Src/delay.c   ****             {
 162:Src/delay.c   ****                 tcnt += told - tnow;        /* ÕâÀï×¢ÒâÒ»ÏÂSYSTICKÊÇÒ»¸öµÝ¼õµÄ¼ÆÊýÆ÷¾Í¿ÉÒÔÁË */
 163:Src/delay.c   ****             }
 164:Src/delay.c   ****             else
 165:Src/delay.c   ****             {
 166:Src/delay.c   ****                 tcnt += reload - tnow + told;
  90              		.loc 1 166 17 is_stmt 1 view .LVU16
  91              		.loc 1 166 32 is_stmt 0 view .LVU17
  92 0016 E01A     		subs	r0, r4, r3
  93              		.loc 1 166 39 view .LVU18
  94 0018 0244     		add	r2, r2, r0
  95              	.LVL7:
  96              		.loc 1 166 22 view .LVU19
  97 001a 1144     		add	r1, r1, r2
  98              	.LVL8:
  99              	.L7:
 167:Src/delay.c   ****             }
 168:Src/delay.c   ****             told = tnow;
 100              		.loc 1 168 13 is_stmt 1 view .LVU20
 169:Src/delay.c   ****             if (tcnt >= ticks) 
 101              		.loc 1 169 13 view .LVU21
 102              		.loc 1 169 16 is_stmt 0 view .LVU22
 103 001c 6145     		cmp	r1, ip
 104 001e 09D2     		bcs	.L10
 105              	.LVL9:
 106              	.L8:
 146:Src/delay.c   ****     uint32_t reload = SysTick->LOAD;        /* LOADµÄÖµ */
 107              		.loc 1 146 26 view .LVU23
 108 0020 1A46     		mov	r2, r3
 109              	.LVL10:
 110              	.L5:
 155:Src/delay.c   ****     {
 111              		.loc 1 155 5 is_stmt 1 view .LVU24
 157:Src/delay.c   ****         if (tnow != told)
 112              		.loc 1 157 9 view .LVU25
 157:Src/delay.c   ****         if (tnow != told)
 113              		.loc 1 157 14 is_stmt 0 view .LVU26
 114 0022 4FF0E023 		mov	r3, #-536813568
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 6


 115 0026 9B69     		ldr	r3, [r3, #24]
 116              	.LVL11:
 158:Src/delay.c   ****         {
 117              		.loc 1 158 9 is_stmt 1 view .LVU27
 158:Src/delay.c   ****         {
 118              		.loc 1 158 12 is_stmt 0 view .LVU28
 119 0028 9A42     		cmp	r2, r3
 120 002a FAD0     		beq	.L5
 160:Src/delay.c   ****             {
 121              		.loc 1 160 13 is_stmt 1 view .LVU29
 160:Src/delay.c   ****             {
 122              		.loc 1 160 16 is_stmt 0 view .LVU30
 123 002c F3D9     		bls	.L6
 162:Src/delay.c   ****             }
 124              		.loc 1 162 17 is_stmt 1 view .LVU31
 162:Src/delay.c   ****             }
 125              		.loc 1 162 30 is_stmt 0 view .LVU32
 126 002e D21A     		subs	r2, r2, r3
 127              	.LVL12:
 162:Src/delay.c   ****             }
 128              		.loc 1 162 22 view .LVU33
 129 0030 1144     		add	r1, r1, r2
 130              	.LVL13:
 162:Src/delay.c   ****             }
 131              		.loc 1 162 22 view .LVU34
 132 0032 F3E7     		b	.L7
 133              	.LVL14:
 134              	.L10:
 170:Src/delay.c   ****             {
 171:Src/delay.c   ****                 break;                      /* Ê±¼ä³¬¹ý/µÈÓÚÒªÑÓ³ÙµÄÊ±¼ä,ÔòÍË³ö */
 172:Src/delay.c   ****             }
 173:Src/delay.c   ****         }
 174:Src/delay.c   ****     }
 175:Src/delay.c   **** 
 176:Src/delay.c   **** #if SYS_SUPPORT_OS                          /* Èç¹ûÐèÒªÖ§³ÖOS */
 177:Src/delay.c   ****     delay_osschedunlock();                  /* »Ö¸´ OS µÄÈÎÎñµ÷¶ÈÆ÷ */
 178:Src/delay.c   **** #endif 
 179:Src/delay.c   **** 
 180:Src/delay.c   **** }
 135              		.loc 1 180 1 view .LVU35
 136 0034 10BC     		pop	{r4}
 137              	.LCFI1:
 138              		.cfi_restore 4
 139              		.cfi_def_cfa_offset 0
 140              	.LVL15:
 141              		.loc 1 180 1 view .LVU36
 142 0036 7047     		bx	lr
 143              	.L12:
 144              		.align	2
 145              	.L11:
 146 0038 00000000 		.word	g_fac_us
 147              		.cfi_endproc
 148              	.LFE66:
 150              		.section	.text.delay_ms,"ax",%progbits
 151              		.align	1
 152              		.global	delay_ms
 153              		.syntax unified
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 7


 154              		.thumb
 155              		.thumb_func
 157              	delay_ms:
 158              	.LVL16:
 159              	.LFB67:
 181:Src/delay.c   **** 
 182:Src/delay.c   **** /**
 183:Src/delay.c   ****  * @brief     ÑÓÊ±nms
 184:Src/delay.c   ****  * @param     nms: ÒªÑÓÊ±µÄmsÊý (0< nms <= (2^32 / fac_us / 1000))(fac_usÒ»°ãµÈÓÚÏµÍ³Ö÷Æµ, ×ÔÐÐÌ×Èë
 185:Src/delay.c   ****  * @retval    ÎÞ
 186:Src/delay.c   ****  */
 187:Src/delay.c   **** void delay_ms(uint16_t nms)
 188:Src/delay.c   **** {
 160              		.loc 1 188 1 is_stmt 1 view -0
 161              		.cfi_startproc
 162              		@ args = 0, pretend = 0, frame = 0
 163              		@ frame_needed = 0, uses_anonymous_args = 0
 164              		.loc 1 188 1 is_stmt 0 view .LVU38
 165 0000 08B5     		push	{r3, lr}
 166              	.LCFI2:
 167              		.cfi_def_cfa_offset 8
 168              		.cfi_offset 3, -8
 169              		.cfi_offset 14, -4
 189:Src/delay.c   ****     
 190:Src/delay.c   **** #if SYS_SUPPORT_OS  /* Èç¹ûÐèÒªÖ§³ÖOS, Ôò¸ù¾ÝÇé¿öµ÷ÓÃosÑÓÊ±ÒÔÊÍ·ÅCPU */
 191:Src/delay.c   ****     if (delay_osrunning && delay_osintnesting == 0)     /* Èç¹ûOSÒÑ¾­ÔÚÅÜÁË,²¢ÇÒ²»ÊÇÔÚÖÐ¶ÏÀïÃæ(ÖÐ¶Ï
 192:Src/delay.c   ****     {
 193:Src/delay.c   ****         if (nms >= g_fac_ms)                            /* ÑÓÊ±µÄÊ±¼ä´óÓÚOSµÄ×îÉÙÊ±¼äÖÜÆÚ */
 194:Src/delay.c   ****         {
 195:Src/delay.c   ****             delay_ostimedly(nms / g_fac_ms);            /* OSÑÓÊ± */
 196:Src/delay.c   ****         }
 197:Src/delay.c   **** 
 198:Src/delay.c   ****         nms %= g_fac_ms;                                /* OSÒÑ¾­ÎÞ·¨Ìá¹©ÕâÃ´Ð¡µÄÑÓÊ±ÁË,²ÉÓÃÆÕÍ¨·½Ê
 199:Src/delay.c   ****     }
 200:Src/delay.c   **** #endif
 201:Src/delay.c   **** 
 202:Src/delay.c   ****     delay_us((uint32_t)(nms * 1000));                   /* ÆÕÍ¨·½Ê½ÑÓÊ± */
 170              		.loc 1 202 5 is_stmt 1 view .LVU39
 171 0002 4FF47A73 		mov	r3, #1000
 172 0006 03FB00F0 		mul	r0, r3, r0
 173              	.LVL17:
 174              		.loc 1 202 5 is_stmt 0 view .LVU40
 175 000a FFF7FEFF 		bl	delay_us
 176              	.LVL18:
 203:Src/delay.c   **** }
 177              		.loc 1 203 1 view .LVU41
 178 000e 08BD     		pop	{r3, pc}
 179              		.cfi_endproc
 180              	.LFE67:
 182              		.section	.text.HAL_Delay,"ax",%progbits
 183              		.align	1
 184              		.global	HAL_Delay
 185              		.syntax unified
 186              		.thumb
 187              		.thumb_func
 189              	HAL_Delay:
 190              	.LVL19:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 8


 191              	.LFB68:
 204:Src/delay.c   **** 
 205:Src/delay.c   **** /**
 206:Src/delay.c   ****  * @brief       HAL¿âÄÚ²¿º¯ÊýÓÃµ½µÄÑÓÊ±
 207:Src/delay.c   ****  * @note        HAL¿âµÄÑÓÊ±Ä¬ÈÏÓÃSystick£¬Èç¹ûÎÒÃÇÃ»ÓÐ¿ªSystickµÄÖÐ¶Ï»áµ¼ÖÂµ÷ÓÃÕâ¸öÑÓÊ±ºóÎÞ·¨ÍË³ö
 208:Src/delay.c   ****  * @param       Delay : ÒªÑÓÊ±µÄºÁÃëÊý
 209:Src/delay.c   ****  * @retval      None
 210:Src/delay.c   ****  */
 211:Src/delay.c   **** void HAL_Delay(uint32_t Delay)
 212:Src/delay.c   **** {
 192              		.loc 1 212 1 is_stmt 1 view -0
 193              		.cfi_startproc
 194              		@ args = 0, pretend = 0, frame = 0
 195              		@ frame_needed = 0, uses_anonymous_args = 0
 196              		.loc 1 212 1 is_stmt 0 view .LVU43
 197 0000 08B5     		push	{r3, lr}
 198              	.LCFI3:
 199              		.cfi_def_cfa_offset 8
 200              		.cfi_offset 3, -8
 201              		.cfi_offset 14, -4
 213:Src/delay.c   ****      delay_ms(Delay);
 202              		.loc 1 213 6 is_stmt 1 view .LVU44
 203 0002 80B2     		uxth	r0, r0
 204              	.LVL20:
 205              		.loc 1 213 6 is_stmt 0 view .LVU45
 206 0004 FFF7FEFF 		bl	delay_ms
 207              	.LVL21:
 214:Src/delay.c   **** }
 208              		.loc 1 214 1 view .LVU46
 209 0008 08BD     		pop	{r3, pc}
 210              		.cfi_endproc
 211              	.LFE68:
 213              		.section	.bss.g_fac_us,"aw",%nobits
 214              		.align	2
 217              	g_fac_us:
 218 0000 00000000 		.space	4
 219              		.text
 220              	.Letext0:
 221              		.file 2 "D:/toolchain/gcc/xpack-arm-none-eabi-gcc-13.2.1-1.1-win32-x64/xpack-arm-none-eabi-gcc-13.
 222              		.file 3 "D:/toolchain/gcc/xpack-arm-none-eabi-gcc-13.2.1-1.1-win32-x64/xpack-arm-none-eabi-gcc-13.
 223              		.file 4 "Drivers/CMSIS/Include/core_cm3.h"
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 delay.c
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:19     .text.delay_init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:25     .text.delay_init:00000000 delay_init
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:42     .text.delay_init:00000008 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:217    .bss.g_fac_us:00000000 g_fac_us
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:47     .text.delay_us:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:53     .text.delay_us:00000000 delay_us
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:146    .text.delay_us:00000038 $d
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:151    .text.delay_ms:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:157    .text.delay_ms:00000000 delay_ms
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:183    .text.HAL_Delay:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:189    .text.HAL_Delay:00000000 HAL_Delay
C:\Users\ADMINI~1\AppData\Local\Temp\cczYCbA4.s:214    .bss.g_fac_us:00000000 $d

NO UNDEFINED SYMBOLS
